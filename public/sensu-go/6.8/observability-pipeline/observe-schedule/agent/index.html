<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Agent reference - Sensu Docs</title>
    <meta name="generator" content="Hugo 0.101.0" />

    
    <meta name="description" content="Read this reference to learn how Sensu&#39;s agent runs as a lightweight client on infrastructure components you want to monitor and creates observability events.">
    
    <link rel="canonical" href="/sensu-go/6.8/observability-pipeline/observe-schedule/agent/">
    

    
      <meta name="docsearch:version" content="6.8" />
    

    
    <meta name="robots" content="noindex">
    

    <meta name="twitter:card" content="summary">
    <meta property="og:url" content="/sensu-go/6.8/observability-pipeline/observe-schedule/agent/">
    <meta property="og:site_name" content="Sensu Docs">
    <meta property="og:title" content="Agent reference | Sensu Go 6.8">
    <meta property="og:image" content="/images/sensu-logo-icon-dark@128px.png">
    <meta name="apple-mobile-web-app-title" content="Sensu Docs">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.png">
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500,600,700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="/stylesheets/sensu.css">
    <script src="/javascripts/modernizr.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"></script>

	<script src="https://use.fontawesome.com/ea9395e21e.js"></script>
	<script src="//rum-static.pingdom.net/pa-5bacf02ccea07b00160001cc.js" async></script>

  
	<script>
    function css(element, property) {
      return window.getComputedStyle(element, null).getPropertyValue(property);
    }

    window.onload = function () {
      var span = document.createElement('span');
      span.className = 'fa';
      span.style.display = 'none';
      document.body.insertBefore(span, document.body.firstChild);

      var faScript = document.createElement('script');
      faScript.src = encodeURI('/js/vendor/fontawesome-all.min.js')

      var jQueryScript = document.createElement('script');
      jQueryScript.src = encodeURI('/js/vendor/jquery-3.4.1.min.js')
      var head = document.getElementsByTagName('head')[0];
      
      if ((css(span, 'font-family')) !== 'FontAwesome') {
        head.appendChild(faScript);
      }
      if (!window.jQuery) {
        console.log("apending jquery local script");
        head.appendChild(jQueryScript);
      }
      document.body.removeChild(span);
    };
  </script>
  <script src="/js/js-cookie.js"></script>
  <script src="/js/platformDropdowns.js"></script>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-804504629"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-804504629');
    gtag('config', 'UA-39138312-2');
  </script>
  
  </head>
  <body>


<script type="text/javascript" src="/javascripts/application.js"></script>


  
  


<header>
  <nav aria-label="Header" id="navbar">
    <label id="hamburger" for="toggle-drawer"></label>

    <a class="logo" href="/">Sensu Docs</a>
    
    
      <div class="product-picker">
  
  <div class="dropdown dropdown--products">
    
      
      <a>Sensu Go<i class="fa fa-chevron-down" aria-hidden="true"></i></a>
    
    <div class="options">
       
        
          
        
        <a href="/sensu-go/6.9/">Sensu Go</a>
       
        
          
        
        <a href="/sensu-core/1.9/">Sensu Core</a>
       
        
          
        
        <a href="/sensu-enterprise/3.8/">Sensu Enterprise</a>
       
        
          
        
        <a href="/sensu-enterprise-dashboard/2.16/">Sensu Enterprise Dashboard</a>
       
        
          
        
        <a href="/uchiwa/1.0/">Uchiwa</a>
      
    </div>
  </div>

  
  <div class="dropdown dropdown--versions">
    
    
    
    
    

    <a>
      6.8
      
      <i class="fa fa-chevron-down" aria-hidden="true"></i>
    </a>
    <div class="options">
      
        
          
        
          
        
          
        
          
        
      
      
      
        
        
          
          
            <a href="/sensu-go/6.9/observability-pipeline/observe-schedule/agent/">
          
            6.9 (latest)
          </a>
        
      
        
        
          
          
            <a href="/sensu-go/6.8/observability-pipeline/observe-schedule/agent/">
          
            6.8 
          </a>
        
      
        
        
          
          
            <a href="/sensu-go/6.7/observability-pipeline/observe-schedule/agent/">
          
            6.7 
          </a>
        
      
        
        
          
          
            <a href="/sensu-go/6.6/observability-pipeline/observe-schedule/agent/">
          
            6.6 
          </a>
        
      
    </div>
  </div>
</div>


    

    <input id="desktop-search" class="algolia-search" type="text" placeholder="Search the docs" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
  </nav>

  
    
<div id="alerts">
  
  
  

  

  

  
</div>

    <div id="alerts">
  
  
  
    
    
    
    







<script>
  $(document).ready(function() {
    
    alertElement = "<div class='alert' style='background-color: #7a4595'>";
    
      alertElement += "<a href='\/sensu-go\/6.9\/observability-pipeline\/observe-schedule\/agent\/'>You\u0027re viewing documentation for an older or pre-release version of Sensu Go. Click here for the latest.</a>";
    
    alertElement += "<span class='alert--close' onClick='this.parentElement.remove()'>" +
                      "<i class='fa fa-times' aria-hidden='true'></i>" +
                    "</span></div>";

    
    $("#alerts").append(alertElement);
  });
</script>

  
</div>

  

</header>


<main class="main">
  <input class="hidden" type="checkbox" id="toggle-drawer" autocomplete="off">
<label id="backdrop" for="toggle-drawer"></label>
<aside class="drawer">
  <div class="drawer--inner">
    
    <div class="product-picker">
  
  <div class="dropdown dropdown--products">
    
      
      <a>Sensu Go<i class="fa fa-chevron-down" aria-hidden="true"></i></a>
    
    <div class="options">
       
        
          
        
        <a href="/sensu-go/6.9/">Sensu Go</a>
       
        
          
        
        <a href="/sensu-core/1.9/">Sensu Core</a>
       
        
          
        
        <a href="/sensu-enterprise/3.8/">Sensu Enterprise</a>
       
        
          
        
        <a href="/sensu-enterprise-dashboard/2.16/">Sensu Enterprise Dashboard</a>
       
        
          
        
        <a href="/uchiwa/1.0/">Uchiwa</a>
      
    </div>
  </div>

  
  <div class="dropdown dropdown--versions">
    
    
    
    
    

    <a>
      6.8
      
      <i class="fa fa-chevron-down" aria-hidden="true"></i>
    </a>
    <div class="options">
      
      
      
        
        
          
          
            <a href="/sensu-go/6.9/observability-pipeline/observe-schedule/agent/">
          
            6.9 (latest)
          </a>
        
      
        
        
          
          
            <a href="/sensu-go/6.8/observability-pipeline/observe-schedule/agent/">
          
            6.8 
          </a>
        
      
        
        
          
          
            <a href="/sensu-go/6.7/observability-pipeline/observe-schedule/agent/">
          
            6.7 
          </a>
        
      
        
        
          
          
            <a href="/sensu-go/6.6/observability-pipeline/observe-schedule/agent/">
          
            6.6 
          </a>
        
      
    </div>
  </div>
</div>


    <input id="mobile-search" class="algolia-search" type="text" placeholder="Search the docs" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
    <nav>
      
        <ul>

  




  
  
  
  
  
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    

      
      

        
        
      
    
  
    

      
      

        
        
      
    
  
    

      
      

        
        
      
    
  
    

      
      

        
        
          

          
          
          
          <li><a class="strong" href="/sensu-go/6.8">Sensu Go</a><ul>

          
          

          
            
            
              
            
          

          
            
            
              
                <li><a class="strong" href="/sensu-go/6.8/release-notes/">Release Notes</a></li>
              
            
          

          
            
            
              
                <li><a class="strong" href="/sensu-go/6.8/get-started/">Get Started with Sensu</a></li>
              
            
          

          
            
            
              
                <li><a class="strong" href="/sensu-go/6.8/platforms/">Platforms and Distributions</a></li>
              
            
          

          
            
            
              
                <li><a class="strong" href="/sensu-go/6.8/commercial/">Commercial Features</a></li>
              
            
          

          
            
            
              
                <li><a class="strong" href="/sensu-go/6.8/versions/">Supported Versions</a></li>
              
            
          

          
            
            
              
                <li><a class="strong" href="/sensu-go/6.8/sensu-plus/">Sensu Plus</a></li>
              
            
          

          
            
            
              
                
                

                <li>
                  <a class="strong accordion current active" href="/sensu-go/6.8/observability-pipeline/">
                    
                      Observability Pipeline
                    
                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                  </a>
                  <ul>
                    
                    
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/observability-pipeline/observe-entities/">
                              Entities
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-entities/entities/">Entities Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-entities/auto-register-deregister/">Auto-register and Deregister Entities</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-entities/monitor-external-resources/">Monitor External Resources</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/observability-pipeline/observe-events/">
                              Events
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-events/events/">Events Reference</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion active current" href="/sensu-go/6.8/observability-pipeline/observe-schedule/">
                              Schedule
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="current" href="/sensu-go/6.8/observability-pipeline/observe-schedule/agent/">Agent Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/backend/">Backend Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/checks/">Checks Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/hooks/">Hooks Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/metrics/">Metrics Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/rule-templates/">Rule Templates Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/service-components/">Service Components Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/subscriptions/">Subscriptions Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/tokens/">Tokens Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/business-service-monitoring-sdk/">Business Service Monitoring SDK</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/augment-event-data-with-hooks/">Augment Event Data</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/prometheus-metrics/">Collect Prometheus Metrics</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/collect-metrics-with-checks/">Collect Service Metrics</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/business-service-monitoring/">Monitor Business Services</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-schedule/monitor-server-resources/">Monitor Server Resources</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/observability-pipeline/observe-filter/">
                              Filter
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-filter/filters/">Event Filters Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-filter/sensu-query-expressions/">Sensu Query Expressions Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-filter/reduce-alert-fatigue/">Reduce Alert Fatigue</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-filter/route-alerts/">Route Alerts</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/observability-pipeline/observe-transform/">
                              Transform
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-transform/mutators/">Mutators Reference</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/observability-pipeline/observe-process/">
                              Process
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/handlers/">Handlers Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/pipelines/">Pipelines Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/silencing/">Silencing Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/sumo-logic-metrics-handlers/">Sumo Logic Metrics Handlers Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/tcp-stream-handlers/">TCP Stream Handlers Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/aggregate-metrics-statsd/">Aggregate StatsD Metrics</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/handler-templates/">Create Handler Templates</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/plan-maintenance/">Plan Maintenance Windows</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/populate-metrics-influxdb/">Populate Metrics in InfluxDB</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/send-data-sumo-logic/">Send Data to Sumo Logic</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/send-email-alerts/">Send Email Alerts</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/send-pagerduty-alerts/">Send PagerDuty Alerts</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/observability-pipeline/observe-process/send-slack-alerts/">Send Slack Alerts</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                </ul>
                </li>
              
            
            
          

          
            
            
              
                
                

                <li>
                  <a class="strong accordion " href="/sensu-go/6.8/operations/">
                    
                      Operations
                    
                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                  </a>
                  <ul>
                    
                    
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/operations/monitoring-as-code/">Monitoring as Code</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/operations/deploy-sensu/">
                              Deploy Sensu
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/hardware-requirements/">Hardware Requirements</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/install-sensu/">Install Sensu</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/deployment-architecture/">Deployment Architecture</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/configuration-management/">Configuration Management</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/generate-certificates/">Generate Certificates</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/secure-sensu/">Secure Sensu</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/secure-postgres/">Secure PostgreSQL</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/cluster-sensu/">Run a Sensu Cluster</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/use-federation/">Reach Multi-cluster Visibility</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/scale-event-storage/">Scale with Enterprise Datastore</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/datastore/">Datastore Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/deploy-sensu/etcdreplicators/">Etcd Replicators Reference</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/operations/control-access/">
                              Control Access
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/control-access/sso/">Configure SSO Authentication</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/control-access/use-apikeys/">Use API Keys</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/control-access/create-read-only-user/">Create a Read-only User</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/control-access/create-limited-service-accounts/">Create Limited Service Accounts</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/control-access/ad-auth/">AD Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/control-access/ldap-auth/">LDAP Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/control-access/oidc-auth/">OIDC Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/control-access/apikeys/">API Keys Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/control-access/namespaces/">Namespaces Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/control-access/rbac/">RBAC Reference</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/operations/maintain-sensu/">
                              Maintain Sensu
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/maintain-sensu/upgrade/">Upgrade Sensu</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/maintain-sensu/migrate/">Migrate from Sensu Core and Sensu Enterprise</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/maintain-sensu/tune/">Tune Sensu</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/maintain-sensu/troubleshoot/">Troubleshoot</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/maintain-sensu/disaster-recovery/">Restore Sensu Configuration</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/maintain-sensu/license/">License Reference</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/operations/monitor-sensu/">
                              Monitor Sensu
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/monitor-sensu/log-sensu-systemd/">Log Sensu Services</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/monitor-sensu/monitor-sensu-with-sensu/">Monitor Sensu with Sensu</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/monitor-sensu/health/">Health Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/monitor-sensu/ready/">Ready Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/monitor-sensu/tessen/">Tessen Reference</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/operations/manage-secrets/">
                              Manage Secrets
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/manage-secrets/secrets-management/">Use Secrets Management</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/manage-secrets/secrets/">Secrets Reference</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/operations/manage-secrets/secrets-providers/">Secrets Providers Reference</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                </ul>
                </li>
              
            
            
          

          
            
            
              
                <li><a class="strong" href="/sensu-go/6.8/guides/">Guides Index</a></li>
              
            
          

          
            
            
              
                
                

                <li>
                  <a class="strong accordion " href="/sensu-go/6.8/sensuctl/">
                    
                      Sensuctl CLI
                    
                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                  </a>
                  <ul>
                    
                    
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/sensuctl/create-manage-resources/">Create and Manage Resources</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/sensuctl/back-up-recover/">Back Up and Recover Resources</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/sensuctl/filter-responses/">Filter Responses</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/sensuctl/environment-variables/">Set Environment Variables</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/sensuctl/sensuctl-bonsai/">Use sensuctl with Bonsai</a>
                          
                        </li>
                    
                  
                </ul>
                </li>
              
            
            
          

          
            
            
              
                
                

                <li>
                  <a class="strong accordion " href="/sensu-go/6.8/web-ui/">
                    
                      Web UI
                    
                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                  </a>
                  <ul>
                    
                    
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/web-ui/view-manage-resources/">View and Manage Resources</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/web-ui/search/">Search in the Web UI</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/web-ui/webconfig/">Configure the Web UI</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/web-ui/bsm-module/">Build Business Service Monitoring</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/web-ui/searches-reference/">Searches Reference</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/web-ui/webconfig-reference/">Web UI Configuration Reference</a>
                          
                        </li>
                    
                  
                </ul>
                </li>
              
            
            
          

          
            
            
              
                
                

                <li>
                  <a class="strong accordion " href="/sensu-go/6.8/catalog/">
                    
                      Sensu Catalog
                    
                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                  </a>
                  <ul>
                    
                    
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/catalog/sensu-catalog/">Configure Integrations in the Sensu Catalog</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/catalog/build-private-catalog/">Build a Private Catalog</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/catalog/catalog-reference/">Catalog Integrations Reference</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/catalog/catalog-api/">Catalog API</a>
                          
                        </li>
                    
                  
                </ul>
                </li>
              
            
            
          

          
            
            
              
                
                

                <li>
                  <a class="strong accordion " href="/sensu-go/6.8/api/">
                    
                      API
                    
                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                  </a>
                  <ul>
                    
                    
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/api/core/">
                              Core API
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/apikeys/">core/v2/apikeys</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/assets/">core/v2/assets</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/checks/">core/v2/checks</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/cluster/">core/v2/cluster</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/cluster-role-bindings/">core/v2/clusterrolebindings</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/cluster-roles/">core/v2/clusterroles</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/entities/">core/v2/entities</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/events/">core/v2/events</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/filters/">core/v2/filters</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/handlers/">core/v2/handlers</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/hooks/">core/v2/hooks</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/mutators/">core/v2/mutators</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/namespaces/">core/v2/namespaces</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/pipelines/">core/v2/pipelines</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/role-bindings/">core/v2/rolebindings</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/roles/">core/v2/roles</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/silenced/">core/v2/silenced</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/tessen/">core/v2/tessen</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/core/users/">core/v2/users</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/api/enterprise/">
                              Enterprise APIs
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/enterprise/authproviders/">enterprise/authentication/v2</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/enterprise/business-service-monitoring/">enterprise/bsm/v1</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/enterprise/federation/">enterprise/federation/v1</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/enterprise/pipeline/">enterprise/pipeline/v1</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/enterprise/prune/">enterprise/prune/v1alpha</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/enterprise/searches/">enterprise/searches/v1</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/enterprise/secrets/">enterprise/secrets/v1</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/enterprise/datastore/">enterprise/store/v1</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/enterprise/webconfig/">enterprise/web/v1</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/api/other/">
                              Other APIs
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/other/auth/">/auth</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/other/health/">/health</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/other/license/">/license</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/other/metrics/">/metrics</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/other/ready/">/ready</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/api/other/version/">/version</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                </ul>
                </li>
              
            
            
          

          
            
            
              
                <li><a class="strong" href="/sensu-go/6.8/reference/">Reference Index</a></li>
              
            
          

          
            
            
              
                
                

                <li>
                  <a class="strong accordion " href="/sensu-go/6.8/plugins/">
                    
                      Plugins
                    
                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                  </a>
                  <ul>
                    
                    
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/plugins/assets/">Assets Reference</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/plugins/plugins/">Plugins Reference</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/plugins/install-plugins/">Install Plugins</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/plugins/use-assets-to-install-plugins/">Use Assets to Install Plugins</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="accordion " href="/sensu-go/6.8/plugins/featured-integrations/">
                              Featured Integrations
                              <i class="fa fa-chevron-down" aria-hidden="true"></i>
                            </a>
                            <ul>
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/ansible/">Ansible</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/chef/">Chef</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/aws-ec2/">EC2</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/elasticsearch/">Elasticsearch</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/email/">Email</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/graphite/">Graphite</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/influxdb/">InfluxDB</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/jira/">Jira</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/opentsdb/">OpenTSDB</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/pagerduty/">PagerDuty</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/prometheus/">Prometheus</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/puppet/">Puppet</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/rundeck/">Rundeck</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/saltstack/">SaltStack</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/servicenow/">ServiceNow</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/slack/">Slack</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/sumologic/">Sumo Logic</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/timescaledb/">TimescaleDB</a>
                                  </li>
                                
                              
                                
                                  
                                  <li>
                                    <a class="" href="/sensu-go/6.8/plugins/featured-integrations/wavefront/">Wavefront</a>
                                  </li>
                                
                              
                            </ul>
                          
                        </li>
                    
                  
                </ul>
                </li>
              
            
            
          

          
            
            
              
                
                

                <li>
                  <a class="strong accordion " href="/sensu-go/6.8/learn/">
                    
                      Learn Sensu
                    
                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                  </a>
                  <ul>
                    
                    
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/learn/concepts-terminology/">Concepts and Terminology</a>
                          
                        </li>
                    
                  
                      
                        
                        <li>
                          
                            <a class="" href="/sensu-go/6.8/learn/demo/">Live Demo</a>
                          
                        </li>
                    
                  
                </ul>
                </li>
              
            
            
          
          </ul></li>
        
      
    
  
    

      
      

        
        
      
    
  
    
  
    
  



<script>
  var acc = document.querySelectorAll('.accordion > .fa');

  for (var i = 0; i < acc.length; i++) {
    acc[i].addEventListener('click', function(e) {
      e.preventDefault();
      this.parentElement.classList.toggle('active');
    });
  }
</script>
</ul>
      
      <hr>
      <div class="drawer--footer">
        <iframe src="https://ghbtns.com/github-btn.html?user=sensu&repo=sensu-docs&type=star&count=true" frameborder="0" scrolling="0" width="170" height="20"></iframe>
        <a target="_blank" href="https://github.com/sensu/sensu-docs/issues/new?title=Docs%20Feedback&body=%3C!--Thanks%20for%20submitting%20feedback%20to%20the%20Sensu%20docs!--%3E%0A%0ALink%20to%20page%3A%20%0A%0A%23%23%23%20Feedback">Open a docs issue</a>
        <a target="_blank" href="https://github.com/sensu/sensu-docs/edit/main/content/sensu-go/6.8/observability-pipeline/observe-schedule/agent.md">Edit this page</a>
        <a target="_blank" href="https://github.com/sensu/sensu-docs/blob/main/CONTRIBUTING.md">Read the contributing guide</a>
        
        
      </div>
    </nav>
  </div>
</aside>


  <article class="article">
    <div class="wrapper">
      <h1>Agent reference </h1>

      
        



  
  
  

  
  
    
    
      
    

    
    
      
    

    
    
    
      <div class="platform-picker-main">
        <div class="platform-picker--inner">
          <button class="platform-picker--value">All Platforms</button>
          <ul>
            
              <li><a data-platform="Linux" href="/sensu-go/6.8/observability-pipeline/observe-schedule/agent/">Linux</a></li>
            
              <li><a data-platform="Windows" href="/sensu-go/6.8/observability-pipeline/observe-schedule/agent/">Windows</a></li>
            
          </ul>
        </div>
      </div>
    
  


      
      <p><a href="../../../files/agent.yml">Example Sensu agent configuration file</a> (download)</p>
<p>The Sensu agent is a lightweight client that runs on the infrastructure components you want to monitor.
Agents register with the Sensu backend as <a href="../../observe-entities/entities/">entities</a> with <code>type: &quot;agent&quot;</code>.
Agent entities are responsible for creating <a href="../../observe-events/events/">check and metrics events</a> to send to the <a href="../backend/">backend event pipeline</a>.</p>
<p>The Sensu agent is available for Linux, macOS, and Windows.
For Windows operating systems, the Sensu agent uses <code>cmd.exe</code> for the execution environment.
For all other operating systems, the Sensu agent uses the Bourne shell (sh).</p>
<p>Read the <a href="../../../operations/deploy-sensu/install-sensu#install-sensu-agents">installation guide</a> to install the agent.</p>
<h2 id="agent-authentication">Agent authentication</h2>
<p>The Sensu agent authenticates to the Sensu backend via <a href="https://en.m.wikipedia.org/wiki/WebSocket">WebSocket</a> transport by either built-in basic authentication (username and password) or mutual transport layer security (mTLS) authentication.</p>
<h3 id="username-and-password-authentication">Username and password authentication</h3>
<p>The default mechanism for agent authentication is <a href="../../../operations/control-access/#use-built-in-basic-authentication">built-in basic authentication</a> with username and password.
The Sensu agent uses username and password authentication unless mTLS authentication has been explicitly configured.</p>
<p>For username and password authentication, sensu-agent joins the username and password with a colon and encodes them as a Base64 value.
Sensu provides the encoded string as the value of the <code>Authorization</code> HTTP header  for example, <code>Authorization: Basic YWdlbnQ6UEBzc3cwcmQh</code>  to authenticate to the Sensu backend.</p>
<p>When using username and password authentication, sensu-agent also sends the following HTTP headers in requests to the backend:</p>
<ul>
<li><code>Sensu-User</code>: the username in plaintext</li>
<li><code>Sensu-AgentName</code>: the agent&rsquo;s configured name in plaintext</li>
<li><code>Sensu-Subscriptions</code>: the agent&rsquo;s subscriptions in a comma-separated plaintext list</li>
<li><code>Sensu-Namespace</code>: the agent&rsquo;s configured namespace in plaintext</li>
</ul>
<h3 id="mtls-authentication">mTLS authentication</h3>
<p>When mTLS is configured for both the Sensu agent and backend, the agent uses mTLS authentication instead of the default username and password authentication.</p>
<p>Sensu backends that are configured for mTLS authentication will no longer accept agent authentication via username and password.
Agents that are configured to use mTLS authentication cannot authenticate with the backend unless the backend is configured for mTLS.</p>
<p>To configure the agent and backend for mTLS authentication:</p>
<ul>
<li>In the backend configuration, specify valid certificate and key files as values for the <code>agent-auth-cert-file</code> and <code>agent-auth-key-file</code> parameters (e.g. <code>backend-1.pem</code> and <code>backend-1-key.pem</code>, respectively).</li>
<li>In the agent configuration, specify valid certificate and key files as values for the <code>cert-file</code> and <code>key-file</code> parameters (e.g. <code>agent.pem</code> and <code>agent-key.pem</code>, respectively).</li>
</ul>

<div class="notices note" ><p><strong>NOTE</strong>: For detailed information about the certificates and keys required for mTLS authentication, read <a href="../../../operations/deploy-sensu/generate-certificates/">Generate certificates for your Sensu installation</a>.
For information about using the certificates and keys to secure your configuration, read <a href="../../../operations/deploy-sensu/secure-sensu/">Secure Sensu</a>.</p>
</div>

<p>The agent and backend will compare the provided certificates with the trusted CA certificate either in the system trust store or specified explicitly as the <code>agent-auth-trusted-ca-file</code> in the backend configuration and <code>trusted-ca-file</code> in the agent configuration.</p>
<p>When using mTLS authentication, sensu-agent sends the following HTTP headers in requests to the backend:</p>
<ul>
<li><code>Sensu-AgentName</code>: the agent&rsquo;s configured name in plaintext</li>
<li><code>Sensu-Subscriptions</code>: the agent&rsquo;s subscriptions in a comma-separated, plaintext list</li>
<li><code>Sensu-Namespace</code>: the agent&rsquo;s configured namespace in plaintext</li>
</ul>
<p>If the Sensu agent is configured for mTLS authentication, it will not send the <code>Authorization</code> HTTP header.</p>
<h4 id="certificate-bundles-or-chains">Certificate bundles or chains</h4>
<p>The Sensu agent supports all types of certificate bundles (or chains) as long as the agent (or leaf) certificate is the <em>first</em> certificate in the bundle.
This is because the Go standard library assumes that the first certificate listed in the PEM file is the leaf certificate  the certificate that the program will use to show its own identity.</p>
<p>If you send the leaf certificate alone instead of sending the whole bundle with the leaf certificate first, you will receive a <code>certificate not signed by trusted authority</code> error.
You must present the whole chain to the remote so it can determine whether it trusts the presented certificate through the chain.</p>
<h4 id="certificate-revocation-check">Certificate revocation check</h4>
<p>The Sensu backend checks certificate revocation list (CRL) and Online Certificate Status Protocol (OCSP) endpoints for agent mTLS, etcd client, and etcd peer connections whose remote sides present X.509 certificates that provide CRL and OCSP revocation information.</p>
<h2 id="communication-between-the-agent-and-backend">Communication between the agent and backend</h2>
<p>The Sensu agent uses <a href="https://en.m.wikipedia.org/wiki/WebSocket">WebSocket</a> (ws) protocol to send and receive JSON messages with the Sensu backend.
For optimal network throughput, agents will attempt to negotiate the use of <a href="https://en.m.wikipedia.org/wiki/Protocol_Buffers">Protobuf</a> serialization when communicating with a Sensu backend that supports it.
This communication is via clear text by default.</p>
<p>Follow <a href="../../../operations/deploy-sensu/secure-sensu/">Secure Sensu</a> to configure the backend and agent for WebSocket Secure (wss) encrypted communication.</p>

<div class="notices note" ><p><strong>NOTE</strong>: For information about agent transport status, use the <a href="../../../api/other/health/#get-health-data-for-your-agent-transport">/health API</a>.</p>
</div>

<h2 id="connection-failure">Connection failure</h2>
<p>Although connection failure may be due to socket errors like unexpectedly closed connections and TLS handshake failures, the Sensu agent generally keeps retrying connections to each URL in the <code>backend-url</code> list until it is successfully connected to a backend URL or you stop the process.</p>
<p>When you start up a Sensu agent configured with multiple <code>backend-url</code> values, the agent shuffles the <code>backend-url</code> list and attempts to connect to the first URL in the shuffled list.
If the agent cannot establish a WebSocket connection with the first URL within the number of seconds specified for the <a href="#backend-handshake-timeout"><code>backend-handshake-timeout</code></a>, the agent abandons the connection attempt and tries the next URL in the shuffled list.</p>
<p>When the agent establishes a WebSocket connection with a backend URL within the <code>backend-handshake-timeout</code> period, the agent sends a heartbeat message to the backend at the specified <a href="#backend-heartbeat-interval"><code>backend-heartbeat-interval</code></a>.
For every heartbeat the agent sends, the agent expects the connected backend to send a heartbeat response within the number of seconds specified for the <code>backend-heartbeat-timeout</code>.
If the connected backend does not respond within the <code>backend-heartbeat-timeout</code> period, the agent closes the connection and attempts to connect to the next backend URL in the shuffled list.</p>
<p>The agent iterates through the shuffled <code>backend-url</code> list until it successfully establishes a WebSocket connection with a backend, returning to the first URL if it fails to connect with the last URL in the list.</p>

<div class="notices note" ><p><strong>NOTE</strong>: Sensu&rsquo;s WebSocket connection heartbeat message and <a href="#keepalive-monitoring">keepalive monitoring</a> mechanism are different, although they have similar purposes.<br><br>
The <code>backend-heartbeat-interval</code> and <code>backend-heartbeat-timeout</code> are specifically configured for the WebSocket connection heartbeat message the agent sends when it connects to a backend URL.<br><br>
Keepalive monitoring is more fluid  it permits agents to reconnect any number of times within the configured timeout.
As long as the agent can successfully send one event to any backend within the timeout, the keepalive logic is satisfied.</p>
</div>

<h2 id="synchronize-time-between-agents-and-the-backend">Synchronize time between agents and the backend</h2>
<p>System clocks between agents and the backend should be synchronized to a central NTP server.
If system time is out of sync, it may cause issues with keepalive, metric, and check alerts.</p>
<h2 id="agent-connection-to-a-cluster">Agent connection to a cluster</h2>
<p>Agents can connect to a Sensu cluster by specifying any Sensu backend URL in the cluster in the <a href="#general-configuration"><code>backend-url</code></a> configuration option.</p>
<p>For more information about clustering, read <a href="../backend/#datastore-and-cluster-configuration">Backend datastore configuration</a> and <a href="../../../operations/deploy-sensu/cluster-sensu/">Run a Sensu cluster</a>.</p>
<h2 id="keepalive-monitoring">Keepalive monitoring</h2>
<p>Sensu keepalives are the heartbeat mechanism used to ensure that all registered agents are operational and able to reach the <a href="../backend/">Sensu backend</a>.
Sensu agents publish keepalive events containing <a href="../../observe-entities/entities/">entity</a> configuration data to the Sensu backend according to the interval specified by the <a href="#keepalive-configuration"><code>keepalive-interval</code></a> configuration option.
All Sensu agent data provided in keepalive events is stored in the agent registry and used to add context to Sensu events and detect Sensu agents in an unhealthy state.</p>
<p>If a Sensu agent fails to send keepalive events over the period specified by the <a href="#keepalive-configuration"><code>keepalive-critical-timeout</code></a> configuration option, the Sensu backend creates a keepalive <strong>critical</strong> alert in the Sensu web UI.
The <code>keepalive-critical-timeout</code> is set to <code>0</code> (disabled) by default to help ensure that it will not interfere with your <code>keepalive-warning-timeout</code> setting.</p>
<p>If a Sensu agent fails to send keepalive events over the period specified by the <a href="#keepalive-warning-timeout-option"><code>keepalive-warning-timeout</code></a> configuration option, the Sensu backend creates a keepalive <strong>warning</strong> alert in the Sensu web UI.
The value you specify for <code>keepalive-warning-timeout</code> must be lower than the value you specify for <code>keepalive-critical-timeout</code>.</p>

<div class="notices note" ><p><strong>NOTE</strong>: If you set the <a href="#ephemeral-agent-configuration"><code>deregister</code> configuration option</a> to <code>true</code>, when a Sensu agent process stops, the Sensu backend will deregister the corresponding entity.<br><br>
Deregistration prevents and clears alerts for failing keepalives for agent entities  the backend does not distinguish between intentional shutdown and failure.
As a result, if you set <code>deregister</code> to <code>true</code> and an agent process stops for any reason, you will not receive alerts for keepalive events in the web UI.<br><br>
If you want to receive alerts for failing keepalives, set the <a href="#ephemeral-agent-configuration">deregister configuration option</a> to <code>false</code>.</p>
</div>

<p>You can use keepalives to identify unhealthy systems and network partitions, send notifications, trigger auto-remediation, and <a href="../../observe-entities/auto-register-deregister/">automatically register and deregister agent entities</a>, among other useful actions.
The agent maps <a href="#keepalive-configuration"><code>keepalive-critical-timeout</code></a> and <a href="#keepalive-warning-timeout-option"><code>keepalive-warning-timeout</code></a> values to certain event check attributes, so you can also <a href="../../observe-filter/filters#filter-to-reduce-alert-fatigue-for-keepalive-events">create time-based event filters</a> to reduce alert fatigue for agent keepalive events.</p>

<div class="notices note" ><p><strong>NOTE</strong>: Automatic keepalive monitoring is not supported for <a href="../../observe-entities/#proxy-entities">proxy entities</a> because they cannot run a Sensu agent.
Use the <a href="../../../api/core/events/">core/v2/events API</a> to send manual keepalive events for proxy entities.</p>
</div>

<h3 id="process-keepalive-events">Process keepalive events</h3>
<p>Process keepalive events with a <a href="#keepalive-pipelines">pipeline</a> or <a href="#keepalive-handlers">handler</a>.</p>
<h4 id="keepalive-pipelines">Keepalive pipelines</h4>
<p>Use the <a href="#keepalive-pipelines-flag"><code>keepalive-pipelines</code></a> configuration option to send keepalive events to any <a href="../../observe-process/pipelines/">pipeline</a> you have configured.</p>
<p>To specify pipelines for the <code>keepalive-pipelines</code> option, use the <a href="../../../sensuctl/create-manage-resources/#supported-resource-types">fully qualified name</a> for pipelines (<code>core/v2.Pipeline</code>) plus the pipeline name (e.g. <code>slack</code> or <code>store-keepalives</code>).
For example:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Command Line">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --keepalive-pipelines core/v2.Pipeline.slack,core/v2.Pipeline.store-keepalives</span></span></code></pre></div>
</div>



<div class="language" data-lang="/etc/sensu/agent.yml">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">keepalive-pipelines</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">core/v2.Pipeline.slack</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">core/v2.Pipeline.store-keepalives</span></span></span></code></pre></div>
</div>




  </div>
</div>

<p>If you do not specify a pipeline with the <code>keepalive-pipelines</code> option, the Sensu backend will use the default <code>keepalive</code> handler and create an event in sensuctl and the Sensu web UI for keepalives.</p>
<h4 id="keepalive-handlers">Keepalive handlers</h4>
<p>You can use a keepalive handler to connect keepalive events to your monitoring workflows.
Sensu looks for an <a href="../../observe-process/handlers/">event handler</a> named <code>keepalive</code> and automatically uses it to process keepalive events.</p>
<p>Suppose you want to receive Slack notifications for keepalive alerts, and you already have a <a href="../../observe-process/send-slack-alerts/">Slack handler set up to process events</a>.
To process keepalive events using the Slack handler, create a handler set named <code>keepalive</code> and add the <code>slack</code> handler to the <code>handlers</code> array.
The resulting <code>keepalive</code> handler set configuration looks like this:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="yml">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">Handler</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">api_version</span><span class="p">:</span><span class="w"> </span><span class="l">core/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">keepalive</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">handlers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">slack</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">set</span></span></span></code></pre></div>
</div>



<div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;Handler&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;api_version&#34;</span><span class="p">:</span> <span class="s2">&#34;core/v2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;metadata&#34;</span> <span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;keepalive&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;spec&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;set&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;handlers&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;slack&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>




  </div>
</div>

<p>You can also use the <a href="#keepalive-handlers-option"><code>keepalive-handlers</code></a> configuration option to send keepalive events to any handler you have configured.
If you do not specify a keepalive handler with the <code>keepalive-handlers</code> option, the Sensu backend will use the default <code>keepalive</code> handler and create an event in sensuctl and the Sensu web UI.</p>
<h2 id="create-observability-events-using-service-checks">Create observability events using service checks</h2>
<p>The Sensu backend coordinates check execution for you by comparing the subscriptions you specify in your checks and entities to determine which entities should receive execution requests for a given check.</p>
<p>Sensu uses the <a href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern">publish/subscribe pattern of communication</a>, which allows automated registration and deregistration of ephemeral systems.
At the core of this model are Sensu <a href="../subscriptions/">subscriptions</a>, which you specify in checks and entities to determine which entities should receive execution requests for a given check.
Subscriptions often correspond with the roles and responsibilities assigned to the entity, such as <code>webserver</code> or <code>database</code>.</p>
<p>Subscriptions determine which <a href="../checks/">checks</a> the agent will execute.
For an agent to execute a check, at least one <a href="../../observe-entities/entities/">entity</a> must include a subscription that matches a subscription in the check definition.
Read the <a href="../subscriptions/">subscriptions reference</a> for more information.</p>
<p>After receiving a check request from the Sensu backend, the agent:</p>
<ol>
<li>
<p>Applies any <a href="../tokens/">tokens</a> that match attribute values in the check definition.</p>
</li>
<li>
<p>Fetches <a href="../../../plugins/assets/">dynamic runtime assets</a> and stores them in its local cache.</p>
<p>By default, agents cache dynamic runtime asset data at <code>/var/cache/sensu/sensu-agent</code> (Linux) or <code>C:\ProgramData\sensu\cache\sensu-agent</code> (Windows).
To specify a different cache location, use the <a href="#cache-dir"><code>cache-dir</code></a> configuration attribute.</p>
</li>
<li>
<p>Executes the <a href="../checks/">check command</a>.</p>
</li>
<li>
<p>Executes any <a href="../hooks/">hooks</a> specified by the check based on the exit status.</p>
</li>
<li>
<p>Creates an <a href="../../observe-events/events/">event</a> that contains information about the applicable entity, check, and metric.</p>
</li>
</ol>
<p>The Sensu backend then processes the event by applying event filters, mutators, and handlers.</p>
<h3 id="proxy-entities">Proxy entities</h3>
<p>Proxy entities allow Sensu to monitor external resources on systems or devices where a Sensu agent cannot be installed, like a network switch.</p>
<p>The <a href="../backend/">Sensu backend</a> stores proxy entity definitions (unlike agent entities, which the agent stores).
When the backend requests a check that includes a <a href="../checks/#proxy-entity-name-attribute"><code>proxy_entity_name</code></a>, the agent includes the provided entity information in the observation data in events in place of the agent entity data.</p>
<p>Read the <a href="../../observe-entities/entities/">entities reference</a> and <a href="../../observe-entities/monitor-external-resources/">Monitor external resources</a> for more information about monitoring proxy entities.</p>
<h2 id="create-observability-events-using-the-agent-api">Create observability events using the agent API</h2>
<p>The Sensu agent API allows external sources to send monitoring data to Sensu without requiring the external sources to know anything about Sensu&rsquo;s internal implementation.
The agent API listens on the address and port specified with the agent <a href="#api-configuration">API configuration options</a>.</p>
<p>The agent API supports only unsecured HTTP requests (no HTTPS).
Requests for unknown endpoints will result in an <code>HTTP 404 Not Found</code> response.</p>
<h3 id="events-post"><code>/events</code> (POST)</h3>
<p>The agent API provides HTTP POST access to publish <a href="../../observe-events/events/">observability events</a> to the Sensu backend via the <code>/events</code> endpoint.</p>
<p>The agent places events created via the agent API <code>/events</code> endpoint into a queue stored on disk.
In case of a loss of connection with the backend or agent shutdown, the agent preserves queued event data.
When the connection is reestablished, the agent sends the queued events to the backend.</p>
<p>The agent API <code>/events</code> endpoint uses a configurable burst limit and rate limit for relaying events to the backend.
Read <a href="#api-configuration">API configuration</a> to configure the <code>events-burst-limit</code> and <code>events-rate-limit</code> options.</p>
<h4 id="example-post-request-to-events-endpoint">Example POST request to events endpoint</h4>
<p>The following example submits an HTTP POST request to the agent API <code>/events</code> endpoint.
The request creates an event for a check named <code>check-mysql-status</code> with the output <code>could not connect to mysql</code> and a status of <code>1</code> (warning).
The agent responds with an <code>HTTP 202 Accepted</code> response to indicate that the event has been added to the queue to be sent to the backend.</p>
<p>In this example, the event will be processed according to an <code>incident_alerts</code> <a href="../../observe-process/pipelines/">pipeline</a>.</p>

<div class="notices note" ><p><strong>NOTE</strong>: For HTTP POST requests to the agent API <code>/events</code> endpoint, check-specific <a href="../checks/#spec-attributes">spec attributes</a> are not required.
If you do want to include spec attributes, list them as individual <a href="../checks/#top-level-attributes">top-level attributes</a> within the event&rsquo;s <code>check</code> scope.</p>
</div>

<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-d <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">  &#34;check&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;metadata&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;name&#34;: &#34;check-mysql-status&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    },
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;status&#34;: 1,
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;output&#34;: &#34;could not connect to mysql&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">  },
</span></span></span><span class="line"><span class="cl"><span class="s1">  &#34;pipelines&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s1">    {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;api_version&#34;: &#34;core/v2&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;type&#34;: &#34;Pipeline&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;name&#34;: &#34;incident_alerts&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  ]
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>http://127.0.0.1:3031/events</span></span></code></pre></div>
</div>



<div class="notices protip" ><p><strong>PRO TIP</strong>: To use the agent API <code>/events</code> endpoint to create proxy entities, include a <code>proxy_entity_name</code> attribute within the <code>check</code> scope.</p>
</div>

<h4 id="detect-silent-failures">Detect silent failures</h4>
<p>You can use the Sensu agent API in combination with the check <a href="../checks#ttl-attribute">time-to-live (TTL) attribute</a> to detect silent failures.
This creates what&rsquo;s commonly referred to as a <a href="https://en.wikipedia.org/wiki/Dead_man%27s_switch">&ldquo;dead man&rsquo;s switch&rdquo;</a>.</p>
<p>With check TTLs, Sensu can set an expectation that a Sensu agent will publish additional events for a check within the period of time specified by the TTL attribute.
If a Sensu agent fails to publish an event before the check TTL expires, the Sensu backend creates an event with a status of <code>1</code> (warning) to indicate the expected event was not received.
For more information about check TTLs, read the <a href="../checks#ttl-attribute">checks reference</a>.</p>
<p>If you use the check TTL attribute along with the Sensu agent API to enable tasks that run outside of Sensu&rsquo;s check scheduling to emit events, these events create a dead man&rsquo;s switch: if the task fails for any reason, the lack of an &ldquo;all clear&rdquo; event from the task will notify operators of the silent failure, which might otherwise be missed.
If an external source sends an event with a check TTL to the Sensu agent API, Sensu expects another event from the same external source before the TTL expires.</p>
<p>Here&rsquo;s an example of external event input via the Sensu agent API that uses a check TTL to create a dead man&rsquo;s switch for MySQL backups.
Assume that a MySQL backup script runs periodically, and you expect the job to take a little less than 7 hours to complete.</p>
<ul>
<li>If the job completes successfully, you want a record of it, but you don&rsquo;t need to receive an alert.</li>
<li>If the job fails or continues running longer than the expected 7 hours, you do need to receive an alert.</li>
</ul>
<p>The script can send an event that tells the Sensu backend to expect an additional event with the same name within 7 hours of the first event:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-d <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">  &#34;check&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;metadata&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;name&#34;: &#34;mysql-backup-job&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    },
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;status&#34;: 0,
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;output&#34;: &#34;mysql backup initiated&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;ttl&#34;: 25200
</span></span></span><span class="line"><span class="cl"><span class="s1">  }
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>http://127.0.0.1:3031/events</span></span></code></pre></div>
</div>


<p>When the script submitted this initial event to the agent API, you recorded in the Sensu backend that your script started.
You also configured the dead man&rsquo;s switch by including the <code>ttl</code> attribute, so you&rsquo;ll receive an alert if the job fails or runs for too long.
Although it is possible for your script to handle errors gracefully and emit additional observability events, this approach allows you to worry less about handling every possible error case.
A lack of additional events before the 7-hour period elapses results in an alert.</p>
<p>If your backup script runs successfully, it can send an additional event without the TTL attribute, which removes the dead man&rsquo;s switch:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl -X POST <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-d <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">  &#34;check&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;metadata&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;name&#34;: &#34;mysql-backup-job&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">    },
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;status&#34;: 0,
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;output&#34;: &#34;mysql backup ran successfully!&#34;
</span></span></span><span class="line"><span class="cl"><span class="s1">  }
</span></span></span><span class="line"><span class="cl"><span class="s1">}&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>http://127.0.0.1:3031/events</span></span></code></pre></div>
</div>


<p>Omitting the TTL attribute from this event also removes the dead man&rsquo;s switch being monitored by the Sensu backend.
This effectively sounds the &ldquo;all clear&rdquo; for this iteration of the task.</p>
<h4 id="events-post-specification">API specification</h4>
<table>
<thead>
<tr>
<th>/events (POST)</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Accepts JSON <a href="../../observe-events/events/">event data</a> and passes the event to the Sensu backend event pipeline for processing.</td>
</tr>
<tr>
<td>example url</td>
<td>http://hostname:3031/events</td>
</tr>
<tr>
<td>payload example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;check&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;metadata&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;check-mysql-status&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;status&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;output&#34;</span><span class="p">:</span> <span class="s2">&#34;could not connect to mysql&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>payload attributes</td>
<td><ul>Required:<li><code>check</code>: All check data must be within the <code>check</code> scope</li><li><code>metadata</code>: The <code>check</code> scope must contain a <code>metadata</code> scope</li><li><code>name</code>: The <code>metadata</code> scope must contain the <code>name</code> attribute with a string that represents the name of the monitoring check</li></ul><ul>Optional:<li>Any other attributes supported by the <a href="../checks/">Sensu check specification</a></li></ul></td>
</tr>
<tr>
<td>response codes</td>
<td><ul><li><strong>Success</strong>: 202 (Accepted)</li><li><strong>Malformed</strong>: 400 (Bad Request)</li><li><strong>Error</strong>: 500 (Internal Server Error)</li></ul></td>
</tr>
</tbody>
</table>
<h3 id="healthz-get"><code>/healthz</code> (GET)</h3>
<p>The agent API <code>/healthz</code> endpoint provides HTTP GET access to the status of the Sensu agent via the agent API.</p>
<h4 id="healthz-get-example">Example</h4>
<p>In the following example, an HTTP GET request is submitted to the agent API <code>/healthz</code> endpoint:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl http://127.0.0.1:3031/healthz</span></span></code></pre></div>
</div>


<p>The request results in a healthy response:</p>
<div class="language" data-lang="text">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">ok</span></span></code></pre></div>
</div>


<h4 id="healthz-get-specification">API specification</h4>
<table>
<thead>
<tr>
<th>/healthz (GET)</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Returns the agent status:<br>- <code>ok</code> if the agent is active and connected to a Sensu backend.<br>- <code>sensu backend unavailable</code> if the agent cannot connect to a backend.</td>
</tr>
<tr>
<td>example url</td>
<td>http://hostname:3031/healthz</td>
</tr>
</tbody>
</table>
<h2 id="create-observability-events-using-the-statsd-listener">Create observability events using the StatsD listener</h2>
<p>Sensu agents include a listener to send <a href="https://github.com/etsy/statsd">StatsD</a> metrics to the event pipeline.
By default, Sensu agents listen on UDP socket 8125 for messages that follow the <a href="https://github.com/etsy/statsd">StatsD line protocol</a> and send metric events for handling by the Sensu backend.</p>
<p>For example, you can use the <a href="https://sourceforge.net/projects/netcat/">Netcat</a> utility to send metrics to the StatsD listener:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;abc.def.g:10|c&#39;</span> <span class="p">|</span> nc -w1 -u localhost <span class="m">8125</span></span></span></code></pre></div>
</div>


<p>Sensu does not store metrics received through the StatsD listener, so it&rsquo;s important to configure <a href="../../observe-process/handlers/">event handlers</a>.</p>
<h3 id="statsd-line-protocol">StatsD line protocol</h3>
<p>The Sensu StatsD listener accepts messages that are formatted according to the StatsD line protocol:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&lt;metricname&gt;:&lt;value&gt;<span class="p">|</span>&lt;type&gt;</span></span></code></pre></div>
</div>


<p>For more information about StatsD, read the <a href="https://github.com/etsy/statsd">StatsD documentation</a>.</p>
<h3 id="configure-the-statsd-listener">Configure the StatsD listener</h3>
<p>To configure the StatsD listener, specify the <a href="#statsd-configuration"><code>statsd-event-handlers</code></a> configuration option in the <a href="#command-line-flags">agent configuration</a> and start the agent.
For example, to start an agent that sends StatsD metrics to InfluxDB, run:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent --statsd-event-handlers influx-db</span></span></code></pre></div>
</div>


<p>Use the <a href="#statsd-configuration">StatsD configuration options</a> to change the default settings for the StatsD listener address, port, and <a href="https://github.com/statsd/statsd#key-concepts">flush interval</a>.
For example, to start an agent with a customized address and flush interval, run:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent --statsd-event-handlers influx-db --statsd-flush-interval <span class="m">1</span> --statsd-metrics-host 123.4.5.11 --statsd-metrics-port <span class="m">8125</span></span></span></code></pre></div>
</div>


<h2 id="create-observability-events-using-the-agent-tcp-and-udp-sockets">Create observability events using the agent TCP and UDP sockets</h2>

<div class="notices note" ><p><strong>NOTE</strong>: The agent TCP and UDP sockets are deprecated in favor of the <a href="#create-observability-events-using-the-agent-api">agent API</a>.</p>
</div>

<p>Sensu agents listen for external monitoring data using TCP and UDP sockets.
The agent sockets accept JSON event data and pass events to the Sensu backend event pipeline for processing.
The TCP and UDP sockets listen on the address and port specified by the <a href="#socket-configuration">socket configuration options</a>.</p>
<h3 id="use-the-tcp-socket">Use the TCP socket</h3>
<p>This example demonstrates external monitoring data input via the Sensu agent TCP socket.
The example uses Bash&rsquo;s built-in <code>/dev/tcp</code> file to communicate with the Sensu agent socket:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;{&#34;name&#34;: &#34;check-mysql-status&#34;, &#34;status&#34;: 1, &#34;output&#34;: &#34;error!&#34;}&#39;</span> &gt; /dev/tcp/localhost/3030</span></span></code></pre></div>
</div>


<p>You can also use the <a href="https://sourceforge.net/projects/netcat/">Netcat</a> utility to send monitoring data to the agent socket:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;{&#34;name&#34;: &#34;check-mysql-status&#34;, &#34;status&#34;: 1, &#34;output&#34;: &#34;error!&#34;}&#39;</span> <span class="p">|</span> nc localhost <span class="m">3030</span></span></span></code></pre></div>
</div>


<h3 id="use-the-udp-socket">Use the UDP socket</h3>
<p>This example demonstrates external monitoring data input via the Sensu agent UDP socket.
The example uses Bash&rsquo;s built-in <code>/dev/udp</code> file to communicate with the Sensu agent socket:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;{&#34;name&#34;: &#34;check-mysql-status&#34;, &#34;status&#34;: 1, &#34;output&#34;: &#34;error!&#34;}&#39;</span> &gt; /dev/udp/127.0.0.1/3030</span></span></code></pre></div>
</div>


<p>You can also use the <a href="https://sourceforge.net/projects/netcat/">Netcat</a> utility to send monitoring data to the agent socket:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;{&#34;name&#34;: &#34;check-mysql-status&#34;, &#34;status&#34;: 1, &#34;output&#34;: &#34;error!&#34;}&#39;</span> <span class="p">|</span> nc -u -v 127.0.0.1 <span class="m">3030</span></span></span></code></pre></div>
</div>


<h3 id="socket-event-format">Socket event format</h3>
<p>The agent TCP and UDP sockets use a special event data format designed for backward compatibility with Sensu Core 1.x check results.
Attributes specified in socket events appear in the resulting event data passed to the Sensu backend.</p>
<p><strong>Example socket input: Minimum required attributes</strong></p>
<div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;check-mysql-status&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;status&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;output&#34;</span><span class="p">:</span> <span class="s2">&#34;error!&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>


<p><strong>Example socket input: All attributes</strong></p>
<div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;check-http&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;status&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;output&#34;</span><span class="p">:</span> <span class="s2">&#34;404&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;source&#34;</span><span class="p">:</span> <span class="s2">&#34;sensu-docs-site&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;executed&#34;</span><span class="p">:</span> <span class="mi">1550013435</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;duration&#34;</span><span class="p">:</span> <span class="mf">1.903135228</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;handlers&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;slack&#34;</span><span class="p">,</span> <span class="s2">&#34;influxdb&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>


<h3 id="socket-event-specification">Socket event specification</h3>

<div class="notices note" ><p><strong>NOTE</strong>: The Sensu agent socket ignores any attributes that are not included in this specification.</p>
</div>

<table>
<thead>
<tr>
<th>name</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Check name.</td>
</tr>
<tr>
<td>required</td>
<td>true</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;check-mysql-status&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>status</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Check execution exit status code. An exit status code of <code>0</code> (zero) indicates <code>OK</code>, <code>1</code> indicates <code>WARNING</code>, and <code>2</code> indicates <code>CRITICAL</code>. Exit status codes other than <code>0</code>, <code>1</code>, and <code>2</code> indicate an <code>UNKNOWN</code> or custom status.</td>
</tr>
<tr>
<td>required</td>
<td>true</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;status&#34;</span><span class="p">:</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Output produced by the check <code>command</code>.</td>
</tr>
<tr>
<td>required</td>
<td>true</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;output&#34;</span><span class="p">:</span> <span class="s2">&#34;CheckHttp OK: 200, 78572 bytes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>source</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Name of the Sensu entity associated with the event. Use this attribute to tie the event to a proxy entity. If no matching entity exists, Sensu creates a proxy entity with the name provided by the <code>source</code> attribute.</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>default</td>
<td>The agent entity that receives the event data.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;source&#34;</span><span class="p">:</span> <span class="s2">&#34;sensu-docs-site&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>client</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Name of the Sensu entity associated with the event. Use this attribute to tie the event to a proxy entity. If no matching entity exists, Sensu creates a proxy entity with the name provided by the <code>client</code> attribute. 
<div class="notices note" ><p><strong>NOTE</strong>: The <code>client</code> attribute is deprecated in favor of the <code>source</code> attribute.</p>
</div>
</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>default</td>
<td>The agent entity that receives the event data.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;client&#34;</span><span class="p">:</span> <span class="s2">&#34;sensu-docs-site&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>executed</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Time at which the check was executed. In seconds since the Unix epoch.</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>default</td>
<td>The time the event was received by the agent.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;executed&#34;</span><span class="p">:</span> <span class="mi">1458934742</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>duration</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Amount of time it took to execute the check. In seconds.</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>type</td>
<td>Float</td>
</tr>
<tr>
<td>example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;duration&#34;</span><span class="p">:</span> <span class="mf">1.903135228</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>command</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Command executed to produce the event. Use the <code>command</code> attribute to add context to the event data. Sensu does not execute the command included in this attribute.</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;command&#34;</span><span class="p">:</span> <span class="s2">&#34;http-check --url https://sensu.io&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>interval</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Interval used to produce the event. Use the <code>interval</code> attribute to add context to the event data. Sensu does not act on the value provided in this attribute.</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>default</td>
<td><code>1</code></td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;interval&#34;</span><span class="p">:</span> <span class="mi">60</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>handlers</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Array of Sensu handler names to use for handling the event. Each handler name in the array must be a string.</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>type</td>
<td>Array</td>
</tr>
<tr>
<td>example</td>
<td><div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;handlers&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;slack&#34;</span><span class="p">,</span> <span class="s2">&#34;influxdb&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<h2 id="registration-endpoint-management-and-service-discovery">Registration, endpoint management, and service discovery</h2>
<p>Sensu agents automatically discover and register infrastructure components and the services running on them.
When an agent process stops, the Sensu backend can automatically create and process a deregistration event for the agent entities.</p>
<p>Read <a href="../../observe-entities/auto-register-deregister/">Automatically register and deregister entities</a> for more information.</p>
<h2 id="agent-configuration-options">Agent configuration options</h2>
<p>Agent configuration is customizable.
This section describes each configuration option in more detail, including examples for each <a href="#agent-configuration-methods">configuration method</a>.</p>
<p>You can customize agent configuration with the <a href="#agent-configuration-file">agent configuration file</a> (Linux and Windows), <a href="#command-line-flags">command line flag arguments</a> (Linux), or <a href="#environment-variables">environment variables</a> (Linux and Windows).</p>

<div class="notices note" ><p><strong>NOTE</strong>: The agent loads configuration upon startup, so you must restart the agent for any configuration updates to take effect.</p>
</div>

<p>To view available configuration options for the <code>sensu-agent start</code> command, run:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --help</span></span></code></pre></div>
</div>


<p>The response will list configuration options as command line flags for <code>sensu-agent start</code>:</p>
<div class="language" data-lang="text">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">start the sensu agent
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Usage:
</span></span><span class="line"><span class="cl">  sensu-agent start [flags]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Flags:
</span></span><span class="line"><span class="cl">      --agent-managed-entity                manage this entity via the agent
</span></span><span class="line"><span class="cl">      --allow-list string                   path to agent execution allow list configuration file
</span></span><span class="line"><span class="cl">      --annotations stringToString          entity annotations map (default [])
</span></span><span class="line"><span class="cl">      --api-host string                     address to bind the Sensu client HTTP API to (default &#34;127.0.0.1&#34;)
</span></span><span class="line"><span class="cl">      --api-port int                        port the Sensu client HTTP API listens on (default 3031)
</span></span><span class="line"><span class="cl">      --assets-burst-limit int              asset fetch burst limit (default 100)
</span></span><span class="line"><span class="cl">      --assets-rate-limit float             maximum number of assets fetched per second
</span></span><span class="line"><span class="cl">      --backend-handshake-timeout int       number of seconds the agent should wait when negotiating a new WebSocket connection (default 15)
</span></span><span class="line"><span class="cl">      --backend-heartbeat-interval int      interval at which the agent should send heartbeats to the backend (default 30)
</span></span><span class="line"><span class="cl">      --backend-heartbeat-timeout int       number of seconds the agent should wait for a response to a hearbeat (default 45)
</span></span><span class="line"><span class="cl">      --backend-url strings                 comma-delimited list of ws/wss URLs of Sensu backend servers. This flag can also be invoked multiple times (default [ws://127.0.0.1:8081])
</span></span><span class="line"><span class="cl">      --cache-dir string                    path to store cached data (default &#34;/var/cache/sensu/sensu-agent&#34;)
</span></span><span class="line"><span class="cl">      --cert-file string                    certificate for TLS authentication
</span></span><span class="line"><span class="cl">  -c, --config-file string                  path to sensu-agent config file (default &#34;/etc/sensu/agent.yml&#34;)
</span></span><span class="line"><span class="cl">      --deregister                          ephemeral agent
</span></span><span class="line"><span class="cl">      --deregistration-handler string       deregistration handler that should process the entity deregistration event
</span></span><span class="line"><span class="cl">      --detect-cloud-provider               enable cloud provider detection
</span></span><span class="line"><span class="cl">      --disable-api                         disable the Agent HTTP API
</span></span><span class="line"><span class="cl">      --disable-assets                      disable check assets on this agent
</span></span><span class="line"><span class="cl">      --disable-sockets                     disable the Agent TCP and UDP event sockets
</span></span><span class="line"><span class="cl">      --discover-processes                  indicates whether process discovery should be enabled
</span></span><span class="line"><span class="cl">      --events-burst-limit int              /events api burst limit (default 10)
</span></span><span class="line"><span class="cl">      --events-rate-limit float             maximum number of events transmitted to the backend through the /events api
</span></span><span class="line"><span class="cl">  -h, --help                                help for start
</span></span><span class="line"><span class="cl">      --insecure-skip-tls-verify            skip TLS verification (not recommended!)
</span></span><span class="line"><span class="cl">      --keepalive-critical-timeout uint32   number of seconds until agent is considered dead by backend to create a critical event
</span></span><span class="line"><span class="cl">      --keepalive-handlers strings          comma-delimited list of keepalive handlers for this entity. This flag can also be invoked multiple times
</span></span><span class="line"><span class="cl">      --keepalive-interval int              number of seconds to send between keepalive events (default 20)
</span></span><span class="line"><span class="cl">      --keepalive-pipelines strings         comma-delimited list of pipeline references for keepalive event
</span></span><span class="line"><span class="cl">      --keepalive-warning-timeout uint32    number of seconds until agent is considered dead by backend to create a warning event (default 120)
</span></span><span class="line"><span class="cl">      --key-file string                     key for TLS authentication
</span></span><span class="line"><span class="cl">      --labels stringToString               entity labels map (default [])
</span></span><span class="line"><span class="cl">      --log-level string                    logging level [panic, fatal, error, warn, info, debug] (default &#34;info&#34;)
</span></span><span class="line"><span class="cl">      --max-session-length                  maximum amount of time after which the agent will reconnect to one of the configured backends (no maximum by default)
</span></span><span class="line"><span class="cl">      --name string                         agent name (defaults to hostname) (default &#34;my_hostname&#34;)
</span></span><span class="line"><span class="cl">      --namespace string                    agent namespace (default &#34;default&#34;)
</span></span><span class="line"><span class="cl">      --password string                     agent password (default &#34;P@ssw0rd!&#34;)
</span></span><span class="line"><span class="cl">      --redact strings                      comma-delimited list of fields to redact, overwrites the default fields. This flag can also be invoked multiple times (default [password,passwd,pass,api_key,api_token,access_key,secret_key,private_key,secret])
</span></span><span class="line"><span class="cl">      --require-fips                        indicates whether fips support should be required in openssl
</span></span><span class="line"><span class="cl">      --require-openssl                     indicates whether openssl should be required instead of go&#39;s built-in crypto
</span></span><span class="line"><span class="cl">      --retry-max                           maximum amount of time to wait before retrying an agent connection to the backend
</span></span><span class="line"><span class="cl">      --retry-min                           minimum amount of time to wait before retrying an agent connection to the backend
</span></span><span class="line"><span class="cl">      --retry-multiplier                    value multiplied with the current retry delay to produce a longer retry delay (bounded by --retry-max)
</span></span><span class="line"><span class="cl">      --socket-host string                  address to bind the Sensu client socket to (default &#34;127.0.0.1&#34;)
</span></span><span class="line"><span class="cl">      --socket-port int                     port the Sensu client socket listens on (default 3030)
</span></span><span class="line"><span class="cl">      --statsd-disable                      disables the statsd listener and metrics server
</span></span><span class="line"><span class="cl">      --statsd-event-handlers strings       comma-delimited list of event handlers for statsd metrics. This flag can also be invoked multiple times
</span></span><span class="line"><span class="cl">      --statsd-flush-interval int           number of seconds between statsd flush (default 10)
</span></span><span class="line"><span class="cl">      --statsd-metrics-host string          address used for the statsd metrics server (default &#34;127.0.0.1&#34;)
</span></span><span class="line"><span class="cl">      --statsd-metrics-port int             port used for the statsd metrics server (default 8125)
</span></span><span class="line"><span class="cl">      --subscriptions strings               comma-delimited list of agent subscriptions. This flag can also be invoked multiple times
</span></span><span class="line"><span class="cl">      --trusted-ca-file string              TLS CA certificate bundle in PEM format
</span></span><span class="line"><span class="cl">      --user string                         agent user (default &#34;agent&#34;)</span></span></code></pre></div>
</div>



<div class="notices note" ><p><strong>NOTE</strong>: Process discovery is disabled in this version of Sensu.
The <code>discover-processes</code> configuration option is not available, and new events will not include data in the <code>processes</code> attributes.
Instead, the field will be empty: <code>&quot;processes&quot;: null</code>.</p>
</div>

<h3 id="general-configuration">General configuration</h3>
<p><a id="agent-managed-entity"></a></p>
<table>
<thead>
<tr>
<th>agent-managed-entity</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Indicates whether the agent&rsquo;s entity solely managed by the agent rather than the backend API. Agent-managed entity definitions will include the label <code>sensu.io/managed_by: sensu-agent</code>, and you cannot update these agent-managed entities via the Sensu backend REST API.</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td>false</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_AGENT_MANAGED_ENTITY</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --agent-managed-entity</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">agent-managed-entity: true</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="allow-list"></a></p>
<table>
<thead>
<tr>
<th>allow-list</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Path to yaml or json file that contains the allow list of check or hook commands the agent can execute. Read <a href="#allow-list-configuration">Allow list configuration</a> and the <a href="#example-allow-list-configuration">example allow list configuration</a> for information about building a configuration file.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_ALLOW_LIST</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --allow-list /etc/sensu/check-allow-list.yaml</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">allow-list: /etc/sensu/check-allow-list.yaml</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="agent-annotations"></a></p>
<table>
<thead>
<tr>
<th>annotations</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Non-identifying metadata to include with event data that you can access with <a href="../../observe-filter/filters/">event filters</a> and <a href="../tokens/">tokens</a>. You can use annotations to add data that is meaningful to people or external tools that interact with Sensu.<br><br>In contrast to labels, you cannot use annotations in <a href="../../../api/#response-filtering">API response filtering</a>, <a href="../../../sensuctl/filter-responses/">sensuctl response filtering</a>, or <a href="../../../web-ui/search#search-for-labels">web UI view filtering</a>.
<div class="notices note" ><p><strong>NOTE</strong>: For annotations that you define in agent.yml, the keys are automatically modified to use all lower-case letters. For example, if you define the annotation <code>webhookURL: &quot;https://my-webhook.com&quot;</code> in agent.yml, it will be listed as <code>webhookurl: &quot;https://my-webhook.com&quot;</code> in entity definitions.<br><br>Key cases are <strong>not</strong> modified for annotations you define with the <code>--annotations</code> command line flag or the <code>SENSU_ANNOTATIONS</code> environment variable.</p>
</div>
</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>type</td>
<td>Map of key-value pairs. Keys and values can be any valid UTF-8 string.</td>
</tr>
<tr>
<td>default</td>
<td><code>null</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_ANNOTATIONS</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --annotations sensu.io/plugins/slack/config/webhook-url<span class="o">=</span>https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX
</span></span><span class="line"><span class="cl">sensu-agent start --annotations example-key<span class="o">=</span><span class="s2">&#34;example value&#34;</span> --annotations example-key2<span class="o">=</span><span class="s2">&#34;example value&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">annotations:
</span></span><span class="line"><span class="cl">  sensu.io/plugins/slack/config/webhook-url: <span class="s2">&#34;https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="assets-burst-limit"></a></p>
<table>
<thead>
<tr>
<th>assets-burst-limit</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Maximum amount of burst allowed in a rate interval when fetching dynamic runtime assets.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>100</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_ASSETS_BURST_LIMIT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --assets-burst-limit <span class="m">100</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">assets-burst-limit: <span class="m">100</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>assets-rate-limit</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Maximum number of dynamic runtime assets to fetch per second. The default value <code>1.39</code> is equivalent to approximately 5000 user-to-server requests per hour.</td>
</tr>
<tr>
<td>type</td>
<td>Float</td>
</tr>
<tr>
<td>default</td>
<td><code>1.39</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_ASSETS_RATE_LIMIT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --assets-rate-limit 1.39</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">assets-rate-limit: 1.39</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="backend-handshake-timeout"></a></p>
<table>
<thead>
<tr>
<th>backend-handshake-timeout</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Number of seconds the Sensu agent should wait when negotiating a new WebSocket connection.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>15</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_BACKEND_HANDSHAKE_TIMEOUT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --backend-handshake-timeout <span class="m">20</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">backend-handshake-timeout: <span class="m">20</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="backend-heartbeat-interval"></a></p>
<table>
<thead>
<tr>
<th>backend-heartbeat-interval</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Interval at which the agent should send heartbeats to the Sensu backend. In seconds.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>30</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_BACKEND_HEARTBEAT_INTERVAL</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --backend-heartbeat-interval <span class="m">45</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">backend-heartbeat-interval: <span class="m">45</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="backend-heartbeat-timeout"></a></p>
<table>
<thead>
<tr>
<th>backend-heartbeat-timeout</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Number of seconds the agent should wait for a response to a hearbeat from the Sensu backend.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>45</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_BACKEND_HEARTBEAT_TIMEOUT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --backend-heartbeat-timeout <span class="m">60</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">backend-heartbeat-timeout: <span class="m">60</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>backend-url</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>ws or wss URL of the Sensu backend server. To specify multiple backends with <code>sensu-agent start</code>, use this flag multiple times. 
<div class="notices note" ><p><strong>NOTE</strong>: If you do not specify a port for your backend-url values, the agent will automatically append the default backend port (8081).</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>List</td>
</tr>
<tr>
<td>default</td>
<td><code>ws://127.0.0.1:8081</code>(Debian and RHEL families)<br><br><code>$SENSU_HOSTNAME:8080</code> (Docker)
<div class="notices note" ><p><strong>NOTE</strong>: Docker-only Sensu binds to the hostnames of containers, represented here as <code>SENSU_HOSTNAME</code> in Docker default values.</p>
</div>
</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_BACKEND_URL</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    
<div class="language" data-lang="ws">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --backend-url ws://127.0.0.1:8081
</span></span><span class="line"><span class="cl">sensu-agent start --backend-url ws://127.0.0.1:8081 --backend-url ws://127.0.0.1:8082</span></span></code></pre></div>
</div>


<div class="language" data-lang="wss">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --backend-url wss://127.0.0.1:8081
</span></span><span class="line"><span class="cl">sensu-agent start --backend-url wss://127.0.0.1:8081 --backend-url wss://127.0.0.1:8082</span></span></code></pre></div>
</div>



  </div>
</div>
</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    
<div class="language" data-lang="ws">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">backend-url:
</span></span><span class="line"><span class="cl">  - <span class="s2">&#34;ws://127.0.0.1:8081&#34;</span>
</span></span><span class="line"><span class="cl">  - <span class="s2">&#34;ws://127.0.0.1:8082&#34;</span></span></span></code></pre></div>
</div>


<div class="language" data-lang="wss">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">backend-url:
</span></span><span class="line"><span class="cl">  - <span class="s2">&#34;wss://127.0.0.1:8081&#34;</span>
</span></span><span class="line"><span class="cl">  - <span class="s2">&#34;wss://127.0.0.1:8082&#34;</span></span></span></code></pre></div>
</div>



  </div>
</div>
</td>
</tr>
</tbody>
</table>
<p><a id="cache-dir"></a></p>
<table>
<thead>
<tr>
<th>cache-dir</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Path to store cached data.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><ul><li>Linux: <code>/var/cache/sensu/sensu-agent</code></li><li>Windows: <code>C:\ProgramData\sensu\cache\sensu-agent</code></li></ul></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_CACHE_DIR</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --cache-dir /cache/sensu-agent</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cache-dir: <span class="s2">&#34;/cache/sensu-agent&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="config-file"></a></p>
<table>
<thead>
<tr>
<th>config-file</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Path to Sensu agent configuration file.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><ul><li>Linux: <code>/etc/sensu/agent.yml</code></li><li>FreeBSD: <code>/usr/local/etc/sensu/agent.yml</code></li><li>Windows: <code>C:\ProgramData\sensu\config\agent.yml</code></li></ul></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_CONFIG_FILE</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --config-file /sensu/agent.yml
</span></span><span class="line"><span class="cl">sensu-agent start -c /sensu/agent.yml</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="disable-assets"></a></p>
<table>
<thead>
<tr>
<th>disable-assets</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>When set to <code>true</code>, disables <a href="../../../plugins/assets/">dynamic runtime assets</a> for the agent. If an agent attempts to execute a check that requires a dynamic runtime asset, the agent will respond with a status of <code>3</code> and a message that indicates the agent could not execute the check because assets are disabled.</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td>false</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_DISABLE_ASSETS</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --disable-assets</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">disable-assets: true</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="discover-processes"></a></p>
<table>
<thead>
<tr>
<th>discover-processes</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>When set to <code>true</code>, the agent populates the <code>processes</code> field in <code>entity.system</code> and updates every 20 seconds.
<div class="notices commercial" ><p><strong>COMMERCIAL FEATURE</strong>: Access the <code>discover-processes</code> configuration option in the packaged Sensu Go distribution. For more information, read <a href="../../../commercial/">Get started with commercial features</a>.</p>
</div>

<div class="notices note" ><p><strong>NOTE</strong>: Process discovery is disabled in this version of Sensu. The discover-processes flag is not available, and new events will not include data in the <code>processes</code> attributes. Instead, the field will be empty: <code>&quot;processes&quot;: null</code>.</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td>false</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_DISCOVER_PROCESSES</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --discover-processes</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">discover-processes: true</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>labels</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Custom attributes to include with event data that you can use for response and web UI view filtering.<br><br>If you include labels in your event data, you can filter <a href="../../../api/#response-filtering">API responses</a>, <a href="../../../sensuctl/filter-responses/">sensuctl responses</a>, and <a href="../../../web-ui/search#search-for-labels">web UI views</a> based on them. In other words, labels allow you to create meaningful groupings for your data.<br><br>Limit labels to metadata you need to use for response filtering. For complex, non-identifying metadata that you will <em>not</em> need to use in response filtering, use annotations rather than labels.
<div class="notices note" ><p><strong>NOTE</strong>: For labels that you define in agent.yml, the keys are automatically modified to use all lower-case letters. For example, if you define the label <code>proxyType: &quot;website&quot;</code> in agent.yml, it will be listed as <code>proxytype: &quot;website&quot;</code> in entity definitions.<br><br>Key cases are <strong>not</strong> modified for labels you define with the <code>--labels</code> command line flag or the <code>SENSU_LABELS</code> environment variable.</p>
</div>
</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>type</td>
<td>Map of key-value pairs. Keys can contain only letters, numbers, and underscores and must start with a letter. Values can be any valid UTF-8 string.</td>
</tr>
<tr>
<td>default</td>
<td><code>null</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_LABELS</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --labels <span class="nv">proxy_type</span><span class="o">=</span>website
</span></span><span class="line"><span class="cl">sensu-agent start --labels <span class="nv">example_key1</span><span class="o">=</span><span class="s2">&#34;example value&#34;</span> <span class="nv">example_key2</span><span class="o">=</span><span class="s2">&#34;example value&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">labels:
</span></span><span class="line"><span class="cl">  proxy_type: website</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="log-level"></a></p>
<table>
<thead>
<tr>
<th>log-level</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Logging level: <code>panic</code>, <code>fatal</code>, <code>error</code>, <code>warn</code>, <code>info</code>, or <code>debug</code>.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>warn</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_LOG_LEVEL</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --log-level debug</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">log-level: debug</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="max-session-length-attribute"></a></p>
<table>
<thead>
<tr>
<th>max-session-length</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Maximum duration for any one agent connection. In milliseconds (<code>ms</code>), seconds (<code>s</code>), minutes (<code>m</code>), or hours (<code>h</code>). Use max-session-length to prevent agent connection distribution from becoming skewed over time.<br><br>The max-session-length algorithm includes random jitter so that agents will not disconnect and reconnect all at once. Based on the random jitter calculation, at some time before a connection reaches the specified maximum duration, Sensu will force the agent to disconnect and reconnect to an available configured backend.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td>Defaults to no maximum.</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_MAX_SESSION_LENGTH</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --max-session-length 15m</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">max-session-length: 15m</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="name-attribute"></a></p>
<table>
<thead>
<tr>
<th>name</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Entity name assigned to the agent entity.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td>Defaults to hostname (for example, <code>sensu-centos</code>).</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_NAME</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --name agent-01</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">name: <span class="s2">&#34;agent-01&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="retry-max"></a></p>
<table>
<thead>
<tr>
<th>retry-max</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Maximum amount of time to wait before retrying an agent connection to the backend. In milliseconds (<code>ms</code>), seconds (<code>s</code>), minutes (<code>m</code>), or hours (<code>h</code>).</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>120s</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_RETRY_MAX</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --retry-max 120s</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">retry-max: 120s</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="retry-min"></a></p>
<table>
<thead>
<tr>
<th>retry-min</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Minimum amount of time to wait before retrying an agent connection to the backend. Multiplied with the <a href="#retry-multiplier">retry-multiplier</a> value at each retry. In milliseconds (<code>ms</code>), seconds (<code>s</code>), minutes (<code>m</code>), or hours (<code>h</code>).</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>1s</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_RETRY_MIN</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --retry-min 1s</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">retry-min: 1s</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="retry-multiplier"></a></p>
<table>
<thead>
<tr>
<th>retry-multiplier</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Value to multiply with the current <a href="#retry-min">retry-min</a> delay to produce longer delays at each retry for exponential backoff.
<div class="notices note" ><p><strong>NOTE</strong>: The maximum retry delay cannot not exceed the <a href="#retry-max">retry-max</a> value.</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>Float</td>
</tr>
<tr>
<td>default</td>
<td><code>2.0</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_RETRY_MULTIPLIER</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --retry-multiplier 2.0</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">retry-multiplier: 2.0</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="subscriptions-option"></a></p>
<table>
<thead>
<tr>
<th>subscriptions</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Array of agent subscriptions that determine which monitoring checks the agent will execute. The subscriptions array items must be strings.</td>
</tr>
<tr>
<td>type</td>
<td>List</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_SUBSCRIPTIONS</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --subscriptions disk-checks,process-checks
</span></span><span class="line"><span class="cl">sensu-agent start --subscriptions disk-checks --subscriptions process-checks</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">subscriptions:
</span></span><span class="line"><span class="cl">  - disk-checks
</span></span><span class="line"><span class="cl">  - process-checks</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<h3 id="api-configuration">API configuration</h3>
<table>
<thead>
<tr>
<th>api-host</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Bind address for the Sensu agent HTTP API.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>127.0.0.1</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_API_HOST</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --api-host 127.0.0.1</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">api-host: <span class="s2">&#34;127.0.0.1&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>api-port</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Listening port for the Sensu agent HTTP API.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>3031</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_API_PORT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --api-port <span class="m">3031</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">api-port: <span class="m">3031</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>disable-api</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td><code>true</code> to disable the agent HTTP API. Otherwise, <code>false</code>.</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td><code>false</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_DISABLE_API</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --disable-api</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">disable-api: true</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>events-burst-limit</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Maximum amount of burst allowed in a rate interval for the <a href="#events-post-specification">agent events API</a>.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>10</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_EVENTS_BURST_LIMIT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --events-burst-limit <span class="m">20</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">events-burst-limit: <span class="m">20</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>events-rate-limit</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Maximum number of events per second that can be transmitted to the backend with the <a href="#events-post-specification">agent events API</a>.</td>
</tr>
<tr>
<td>type</td>
<td>Float</td>
</tr>
<tr>
<td>default</td>
<td><code>10.0</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_EVENTS_RATE_LIMIT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --events-rate-limit 20.0</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">events-rate-limit: 20.0</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<h3 id="ephemeral-agent-configuration">Ephemeral agent configuration</h3>
<table>
<thead>
<tr>
<th>deregister</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td><code>true</code> if a deregistration event should be created upon Sensu agent process stop. Otherwise, <code>false</code>.<br>
<div class="notices note" ><p><strong>NOTE</strong>: To receive alerts for failing <a href="#keepalive-monitoring">keepalives</a>, set to <code>false</code>.</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td><code>false</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_DEREGISTER</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --deregister</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">deregister: true</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="agent-deregistration-handler-attribute"></a></p>
<table>
<thead>
<tr>
<th>deregistration-handler</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Name of the event handler to use when processing the agent&rsquo;s deregistration events. This configuration option overrides any handlers applied by the <a href="../backend/#deregistration-handler-attribute"><code>deregistration-handler</code></a> backend configuration option.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_DEREGISTRATION_HANDLER</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --deregistration-handler deregister</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">deregistration-handler: deregister</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="detect-cloud-provider-option"></a></p>
<table>
<thead>
<tr>
<th>detect-cloud-provider</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td><code>true</code> to enable cloud provider detection mechanisms. Otherwise, <code>false</code>. When this option is enabled, the agent will attempt to read files, resolve hostnames, and make HTTP requests to determine what cloud environment it is running in.</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td><code>false</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_DETECT_CLOUD_PROVIDER</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --detect-cloud-provider false</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">detect-cloud-provider: false</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<h3 id="keepalive-configuration">Keepalive configuration</h3>
<table>
<thead>
<tr>
<th>keepalive-critical-timeout</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Number of seconds after a missing keepalive event until the agent is considered unresponsive by the Sensu backend to create a critical event. Set to disabled (<code>0</code>) by default. If the value is not <code>0</code>, it must be greater than or equal to <code>5</code>.<br>
<div class="notices note" ><p><strong>NOTE</strong>: The agent maps the <code>keepalive-critical-timeout</code> value to the <a href="../../observe-events/events/#check-scope"><code>event.check.ttl</code> attribute</a> when keepalive events are generated for the Sensu backend to process. The <code>event.check.ttl</code> attribute is useful for <a href="../../observe-filter/filters#filter-to-reduce-alert-fatigue-for-keepalive-events">creating time-based event filters</a> to reduce alert fatigue for agent keepalive events.</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>0</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_KEEPALIVE_CRITICAL_TIMEOUT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --keepalive-critical-timeout <span class="m">300</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">keepalive-critical-timeout: <span class="m">300</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="keepalive-handlers-option"></a></p>
<table>
<thead>
<tr>
<th>keepalive-handlers</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td><a href="../../observe-process/handlers/#keepalive-event-handlers">Keepalive event handlers</a> to use for the entity, specified in a comma-delimited list. You can specify any configured handler and invoke the <code>keepalive-handlers</code> configuration option multiple times. If keepalive handlers are not specified, the Sensu backend will use the default <code>keepalive</code> handler and create an event in sensuctl and the Sensu web UI.</td>
</tr>
<tr>
<td>type</td>
<td>List</td>
</tr>
<tr>
<td>default</td>
<td><code>keepalive</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_KEEPALIVE_HANDLERS</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --keepalive-handlers slack,email</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">keepalive-handlers:
</span></span><span class="line"><span class="cl">- slack
</span></span><span class="line"><span class="cl">- email</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>keepalive-interval</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Number of seconds between keepalive events.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>20</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_KEEPALIVE_INTERNAL</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --keepalive-interval <span class="m">30</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">keepalive-interval: <span class="m">30</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="keepalive-pipelines-flag"></a></p>
<table>
<thead>
<tr>
<th>keepalive-pipelines</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td><a href="../../observe-process/pipelines/">Pipelines</a> to use for processing keepalive events, specified in a comma-delimited list. If keepalive pipelines are not specified, the Sensu backend will use the default <code>keepalive</code> handler and create an event in sensuctl and the Sensu web UI.<br><br>To specify pipelines for the <code>keepalive-pipelines</code> configuration option, use the <a href="../../../sensuctl/create-manage-resources/#supported-resource-types">fully qualified name</a> for pipeline resources (<code>core/v2.Pipeline</code>) plus the pipeline name.</td>
</tr>
<tr>
<td>type</td>
<td>List</td>
</tr>
<tr>
<td>default</td>
<td><code>keepalive</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_KEEPALIVE_PIPELINES</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --keepalive-pipelines core/v2.Pipeline.slack,core/v2.Pipeline.store-keepalives</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">keepalive-pipelines:
</span></span><span class="line"><span class="cl">- core/v2.Pipeline.slack
</span></span><span class="line"><span class="cl">- core/v2.Pipeline.store-keepalives</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="keepalive-warning-timeout-option"></a></p>
<table>
<thead>
<tr>
<th>keepalive-warning-timeout</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Number of seconds after a missing keepalive event until the agent is considered unresponsive by the Sensu backend to create a warning event. Value must be lower than the <code>keepalive-critical-timeout</code> value. Minimum value is <code>5</code>.<br>
<div class="notices note" ><p><strong>NOTE</strong>: The agent maps the <code>keepalive-warning-timeout</code> value to the <a href="../../observe-events/events/#check-scope"><code>event.check.timeout</code> attribute</a> when keepalive events are generated for the Sensu backend to process. The <code>event.check.timeout</code> attribute is useful for <a href="../../observe-filter/filters#filter-to-reduce-alert-fatigue-for-keepalive-events">creating time-based event filters</a> to reduce alert fatigue for agent keepalive events.</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>120</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_KEEPALIVE_WARNING_TIMEOUT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --keepalive-warning-timeout <span class="m">300</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">keepalive-warning-timeout: <span class="m">300</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<h3 id="security-configuration">Security configuration</h3>
<table>
<thead>
<tr>
<th>cert-file</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Path to the agent certificate file used in mTLS authentication. Sensu supports certificate bundles (or chains) as long as the agent (or leaf) certificate is the <em>first</em> certificate in the bundle.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_CERT_FILE</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --cert-file /path/to/tls/agent.pem</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cert-file: <span class="s2">&#34;/path/to/tls/agent.pem&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>insecure-skip-tls-verify</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Skip SSL verification. 
<div class="notices warning" ><p><strong>WARNING</strong>: This configuration option is intended for use in development systems only. Do not use this configuration option in production.</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td><code>false</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_INSECURE_SKIP_TLS_VERIFY</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --insecure-skip-tls-verify</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">insecure-skip-tls-verify: true</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>key-file</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Path to the agent key file used in mTLS authentication.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_KEY_FILE</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --key-file /path/to/tls/agent-key.pem</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">key-file: <span class="s2">&#34;/path/to/tls/agent-key.pem&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>namespace</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Agent namespace. 
<div class="notices note" ><p><strong>NOTE</strong>: Agents are represented in the backend as a class of entity.
Entities can only belong to a <a href="../../../operations/control-access/rbac/#namespaced-resource-types">single namespace</a>.</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>default</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_NAMESPACE</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --namespace ops</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">namespace: ops</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="agent-password-option"></a></p>
<table>
<thead>
<tr>
<th>password</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td><a href="../../../operations/control-access/rbac/#agent-user">Sensu RBAC password</a> used by the agent.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>P@ssw0rd!</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_PASSWORD</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --password secure-password</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">password: secure-password</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>redact</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>List of fields to redact when displaying the entity. 
<div class="notices note" ><p><strong>NOTE</strong>: Redacted secrets are sent via the WebSocket connection and stored in etcd.
They are not logged or displayed via the Sensu API.</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>List</td>
</tr>
<tr>
<td>default</td>
<td>By default, Sensu redacts the following fields: <code>password</code>, <code>passwd</code>, <code>pass</code>, <code>api_key</code>, <code>api_token</code>, <code>access_key</code>, <code>secret_key</code>, <code>private_key</code>, <code>secret</code>.</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_REDACT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --redact secret,ec2_access_key</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">redact:
</span></span><span class="line"><span class="cl">  - secret
</span></span><span class="line"><span class="cl">  - ec2_access_key</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="fips-openssl"></a></p>
<table>
<thead>
<tr>
<th>require-fips</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Require Federal Information Processing Standard (FIPS) support in OpenSSL. Logs an error at Sensu agent startup if <code>true</code> but OpenSSL is not running in FIPS mode. 
<div class="notices note" ><p><strong>NOTE</strong>: The <code>require-fips</code> configuration option is only available within the Linux amd64 OpenSSL-linked binary.
<a href="https://sensu.io/contact">Contact Sensu</a> to request the builds for OpenSSL with FIPS support.</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td>false</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_REQUIRE_FIPS</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --require-fips</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">require-fips: true</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>require-openssl</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Use OpenSSL instead of Go&rsquo;s standard cryptography library. Logs an error at Sensu agent startup if <code>true</code> but Go&rsquo;s standard cryptography library is loaded. 
<div class="notices note" ><p><strong>NOTE</strong>: The <code>require-openssl</code> configuration option is only available within the Linux amd64 OpenSSL-linked binary.
<a href="https://sensu.io/contact">Contact Sensu</a> to request the builds for OpenSSL with FIPS support.</p>
</div>
</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td>false</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_REQUIRE_OPENSSL</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --require-openssl</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">require-openssl: true</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>trusted-ca-file</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>SSL/TLS certificate authority.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_TRUSTED_CA_FILE</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --trusted-ca-file /path/to/tls/ca.pem</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">trusted-ca-file: <span class="s2">&#34;/path/to/tls/ca.pem&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<p><a id="agent-user-option"></a></p>
<table>
<thead>
<tr>
<th>user</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td><a href="../../../operations/control-access/rbac/#agent-user">Sensu RBAC username</a> used by the agent. Agents require get, list, create, update, and delete permissions for events across all namespaces.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>agent</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_USER</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --user agent-01</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">user: <span class="s2">&#34;agent-01&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<h3 id="socket-configuration">Socket configuration</h3>
<table>
<thead>
<tr>
<th>disable-sockets</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td><code>true</code> to disable the agent TCP and UDP event sockets. Othewise, <code>false</code>.</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td><code>false</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_DISABLE_SOCKETS</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --disable-sockets</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">disable-sockets: true</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>socket-host</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Address to bind the Sensu agent socket to.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>127.0.0.1</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_SOCKET_HOST</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --socket-host 127.0.0.1</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">socket-host: <span class="s2">&#34;127.0.0.1&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>socket-port</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Port the Sensu agent socket listens on.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>3030</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_SOCKET_PORT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --socket-port <span class="m">3030</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">socket-port: <span class="m">3030</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<h3 id="statsd-configuration">StatsD configuration</h3>
<table>
<thead>
<tr>
<th>statsd-disable</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td><code>true</code> to disable the <a href="https://github.com/etsy/statsd">StatsD</a> listener and metrics server. Otherwise, <code>false</code>.</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>default</td>
<td><code>false</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_STATSD_DISABLE</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --statsd-disable</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">statsd-disable: true</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>statsd-event-handlers</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>List of event handlers for StatsD metrics.</td>
</tr>
<tr>
<td>type</td>
<td>List</td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_STATSD_EVENT_HANDLERS</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --statsd-event-handlers influxdb,opentsdb
</span></span><span class="line"><span class="cl">sensu-agent start --statsd-event-handlers influxdb --statsd-event-handlers opentsdb</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">statsd-event-handlers:
</span></span><span class="line"><span class="cl">  - influxdb
</span></span><span class="line"><span class="cl">  - opentsdb</span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>statsd-flush-interval</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Number of seconds between <a href="https://github.com/statsd/statsd#key-concepts">StatsD flushes</a>.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>10</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_STATSD_FLUSH_INTERVAL</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --statsd-flush-interval <span class="m">30</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">statsd-flush-interval: <span class="m">30</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>statsd-metrics-host</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Address used for the StatsD metrics server.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>default</td>
<td><code>127.0.0.1</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_STATSD_METRICS_HOST</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --statsd-metrics-host 127.0.0.1</span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">statsd-metrics-host: <span class="s2">&#34;127.0.0.1&#34;</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>statsd-metrics-port</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Port used for the StatsD metrics server.</td>
</tr>
<tr>
<td>type</td>
<td>Integer</td>
</tr>
<tr>
<td>default</td>
<td><code>8125</code></td>
</tr>
<tr>
<td>environment variable</td>
<td><code>SENSU_STATSD_METRICS_PORT</code></td>
</tr>
<tr>
<td>command line example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --statsd-metrics-port <span class="m">8125</span></span></span></code></pre></div>
</div>

</td>
</tr>
<tr>
<td>agent.yml config file example</td>
<td><div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">statsd-metrics-port: <span class="m">8125</span></span></span></code></pre></div>
</div>

</td>
</tr>
</tbody>
</table>
<h3 id="allow-list-configuration">Allow list configuration</h3>
<p>The allow list includes check and hook commands the agent can execute.
Use the <a href="#allow-list"><code>allow-list</code> configuration option</a> to specify the path to the yaml or json file that contains your allow list.</p>
<p>Use these commands to build your allow list configuration file.</p>
<table>
<thead>
<tr>
<th>args</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Arguments for the <code>exec</code> command.</td>
</tr>
<tr>
<td>required</td>
<td>true</td>
</tr>
<tr>
<td>type</td>
<td>Array</td>
</tr>
<tr>
<td>example</td>
<td><div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    
<div class="language" data-lang="yml">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">foo</span></span></span></code></pre></div>
</div>


<div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;args&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;foo&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>



  </div>
</div>
</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>enable_env</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td><code>true</code> to enable environment variables. Otherwise, <code>false</code>.</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>type</td>
<td>Boolean</td>
</tr>
<tr>
<td>example</td>
<td><div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    
<div class="language" data-lang="yml">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">enable_env</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span></span></span></code></pre></div>
</div>


<div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;enable_env&#34;</span><span class="p">:</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>



  </div>
</div>
</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>exec</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Command to allow the Sensu agent to run as a check or a hook.</td>
</tr>
<tr>
<td>required</td>
<td>true</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>example</td>
<td><div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    
<div class="language" data-lang="yml">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/usr/local/bin/check_memory.sh&#34;</span></span></span></code></pre></div>
</div>


<div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;exec&#34;</span><span class="p">:</span> <span class="s2">&#34;/usr/local/bin/check_memory.sh&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>



  </div>
</div>
</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>sha512</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>Checksum of the check or hook executable.</td>
</tr>
<tr>
<td>required</td>
<td>false</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
</tr>
<tr>
<td>example</td>
<td><div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    
<div class="language" data-lang="yml">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nt">sha512</span><span class="p">:</span><span class="w"> </span><span class="l">4f926bf4328...</span></span></span></code></pre></div>
</div>


<div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;sha512&#34;</span><span class="p">:</span> <span class="s2">&#34;4f926bf4328...&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>



  </div>
</div>
</td>
</tr>
</tbody>
</table>
<h4 id="example-allow-list-configuration">Example allow list configuration</h4>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="yml">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl">- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">/usr/local/bin/check_memory.sh</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">sha512</span><span class="p">:</span><span class="w"> </span><span class="l">736ac120323772543fd3a08ee54afdd54d214e58c280707b63ce652424313ef9084ca5b247d226aa09be8f831034ff4991bfb95553291c8b3dc32cad034b4706</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">enable_env</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">foo</span><span class="p">:</span><span class="w"> </span><span class="l">bar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">/usr/local/bin/show_process_table.sh</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">sha512</span><span class="p">:</span><span class="w"> </span><span class="l">28d61f303136b16d20742268a896bde194cc99342e02cdffc1c2186f81c5adc53f8550635156bebeed7d87a0c19a7d4b7a690f1a337cc4737e240b62b827f78a</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="l">echo-asset.sh</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">args</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="s2">&#34;foo&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">sha512</span><span class="p">:</span><span class="w"> </span><span class="l">cce3d16e5881ba829f271df778f9014f7c3659917f7acfd7a60a91bfcabb472eea72f9781194d310388ba046c21790364ad0308a5a897cde50022195ba90924b</span></span></span></code></pre></div>
</div>



<div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;exec&#34;</span><span class="p">:</span> <span class="s2">&#34;/usr/local/bin/check_memory.sh&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;args&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;sha512&#34;</span><span class="p">:</span> <span class="s2">&#34;736ac120323772543fd3a08ee54afdd54d214e58c280707b63ce652424313ef9084ca5b247d226aa09be8f831034ff4991bfb95553291c8b3dc32cad034b4706&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;enable_env&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;foo&#34;</span><span class="p">:</span> <span class="s2">&#34;bar&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;exec&#34;</span><span class="p">:</span> <span class="s2">&#34;/usr/local/bin/show_process_table.sh&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;args&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;sha512&#34;</span><span class="p">:</span> <span class="s2">&#34;28d61f303136b16d20742268a896bde194cc99342e02cdffc1c2186f81c5adc53f8550635156bebeed7d87a0c19a7d4b7a690f1a337cc4737e240b62b827f78a&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;exec&#34;</span><span class="p">:</span> <span class="s2">&#34;echo-asset.sh&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;args&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;foo&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;sha512&#34;</span><span class="p">:</span> <span class="s2">&#34;cce3d16e5881ba829f271df778f9014f7c3659917f7acfd7a60a91bfcabb472eea72f9781194d310388ba046c21790364ad0308a5a897cde50022195ba90924b&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span></span></span></code></pre></div>
</div>




  </div>
</div>

<h2 id="agent-configuration-methods">Agent configuration methods</h2>
<h3 id="agent-configuration-file">Agent configuration file</h3>
<p>For Linux and Windows agents, you can customize the agent configuration in a <code>.yml</code> configuration file.</p>
<p>The default agent configuration file path for Linux is <code>/etc/sensu/agent.yml</code>.
The default agent configuration file path for Windows is <code>C:\ProgramData\sensu\config\agent.yml.example</code>.</p>
<p>To use the <code>agent.yml</code> file to configure the agent, list the desired configuration attributes and values.
Review the <a href="../../../files/windows/agent.yml">example Sensu agent configuration file</a> for a complete example.</p>

<div class="notices note" ><p><strong>NOTE</strong>: The agent loads configuration upon startup.
If you make changes in the <code>agent.yml</code> configuration file after startup, you must restart the agent for the changes to take effect.</p>
</div>

<p>Configuration via command line flags or environment variables overrides any configuration specified in the agent configuration file.
Read <a href="#create-configuration-overrides">Create overrides</a> to learn more.</p>
<h3 id="command-line-flags">Command line flags</h3>
<p>For Linux agents, you can customize the agent configuration with <code>sensu-agent start</code> command line flags.</p>
<p>To use command line flags, specify the desired configuration options and values along with the <code>sensu-agent start</code> command.
For example:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --name webserver_05 --keepalive-warning-timeout <span class="m">60</span> --keepalive-critical-timeout <span class="m">120</span></span></span></code></pre></div>
</div>


<p>Configuration via command line flags overrides attributes specified in a configuration file or with environment variables.
Read <a href="#create-configuration-overrides">Create overrides</a> to learn more.</p>
<h3 id="environment-variables">Environment variables</h3>
<p>Instead of using the agent configuration file or command line flags, you can use environment variables to configure your Sensu agent.
Each agent configuration option has an associated environment variable.
You can also create your own environment variables, as long as you name them correctly and save them in the correct place.
Here&rsquo;s how.</p>
<ol>
<li>
<p>Create the files from which the <code>sensu-agent</code> service configured by our supported packages will read environment variables:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    
     
<div class="language" data-lang="Debian family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo touch /etc/default/sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="RHEL family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo touch /etc/sysconfig/sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="Windows">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># By default, the agent loads configuration from %ALLUSERSPROFILE%\sensu\config\agent.yml.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># If you did not change the location for the configuration file during installation,</span>
</span></span><span class="line"><span class="cl"><span class="c1"># the sensu-agent configuration file path is:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">C:<span class="se">\P</span>rogramData<span class="se">\s</span>ensu<span class="se">\c</span>onfig<span class="se">\a</span>gent.yml</span></span></code></pre></div>
</div>


     
     
  </div>
</div>

</li>
<li>
<p>Make sure the environment variable is named correctly.
All environment variables that control Sensu agent configuration begin with <code>SENSU_</code>.</p>
<p>To rename a configuration option you wish to specify as an environment variable, prepend <code>SENSU_</code>, convert dashes to underscores, and capitalize all letters.
For example, the environment variable for the flag <code>api-host</code> is <code>SENSU_API_HOST</code>.</p>
<p>For a custom environment variable, you do not have to prepend <code>SENSU</code>.
For example, <code>TEST_VAR_1</code> is a valid custom environment variable name.</p>
</li>
<li>
<p>Add the environment variable to the environment file.</p>
<p>In this example, the <code>api-host</code> flag is configured as an environment variable and set to <code>&quot;0.0.0.0&quot;</code>:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Debian family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;SENSU_API_HOST=&#34;0.0.0.0&#34;&#39;</span> <span class="p">|</span> sudo tee -a /etc/default/sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="RHEL family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;SENSU_API_HOST=&#34;0.0.0.0&#34;&#39;</span> <span class="p">|</span> sudo tee -a /etc/sysconfig/sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="Windows">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># Save the following environment variable in the configuration file</span>
</span></span><span class="line"><span class="cl"><span class="c1"># at C:\ProgramData\sensu\config\agent.yml:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">SENSU_API_HOST</span><span class="o">=</span><span class="s2">&#34;0.0.0.0&#34;</span></span></span></code></pre></div>
</div>



     
  </div>
</div>

</li>
<li>
<p>Restart the sensu-agent service so these settings can take effect:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Debian family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="RHEL family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="Windows">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sc.exe start SensuAgent</span></span></code></pre></div>
</div>



     
  </div>
</div>

</li>
</ol>

<div class="notices note" ><p><strong>NOTE</strong>: Sensu includes an environment variable for each agent configuration option.
They are listed in the <a href="#general-configuration">configuration description tables</a>.</p>
</div>

<h3 id="format-for-label-and-annotation-environment-variables">Format for label and annotation environment variables</h3>
<p>To use labels and annotations as environment variables in your check and plugin configurations, you must use a specific format when you create the environment variables.</p>
<p>For example, to create the labels <code>&quot;region&quot;: &quot;us-east-1&quot;</code> and <code>&quot;type&quot;: &quot;website&quot;</code> as an environment variable:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Debian family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;SENSU_LABELS=&#39;</span><span class="o">{</span><span class="s2">&#34;region&#34;</span>: <span class="s2">&#34;us-east-1&#34;</span>, <span class="s2">&#34;type&#34;</span>: <span class="s2">&#34;website&#34;</span><span class="o">}</span><span class="s1">&#39;&#39;</span> <span class="p">|</span> sudo tee -a /etc/default/sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="RHEL family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;SENSU_LABELS=&#39;</span><span class="o">{</span><span class="s2">&#34;region&#34;</span>: <span class="s2">&#34;us-east-1&#34;</span>, <span class="s2">&#34;type&#34;</span>: <span class="s2">&#34;website&#34;</span><span class="o">}</span><span class="s1">&#39;&#39;</span> <span class="p">|</span> sudo tee -a /etc/sysconfig/sensu-agent</span></span></code></pre></div>
</div>




  </div>
</div>

<p>To create the annotations <code>&quot;maintainer&quot;: &quot;Team A&quot;</code> and <code>&quot;webhook-url&quot;: &quot;https://hooks.slack.com/services/T0000/B00000/XXXXX&quot;</code> as an environment variable:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Debian family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;SENSU_ANNOTATIONS=&#39;</span><span class="o">{</span><span class="s2">&#34;maintainer&#34;</span>: <span class="s2">&#34;Team A&#34;</span>, <span class="s2">&#34;webhook-url&#34;</span>: <span class="s2">&#34;https://hooks.slack.com/services/T0000/B00000/XXXXX&#34;</span><span class="o">}</span><span class="s1">&#39;&#39;</span> <span class="p">|</span> sudo tee -a /etc/default/sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="RHEL family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;SENSU_ANNOTATIONS=&#39;</span><span class="o">{</span><span class="s2">&#34;maintainer&#34;</span>: <span class="s2">&#34;Team A&#34;</span>, <span class="s2">&#34;webhook-url&#34;</span>: <span class="s2">&#34;https://hooks.slack.com/services/T0000/B00000/XXXXX&#34;</span><span class="o">}</span><span class="s1">&#39;&#39;</span> <span class="p">|</span> sudo tee -a /etc/sysconfig/sensu-agent</span></span></code></pre></div>
</div>




  </div>
</div>

<h3 id="use-environment-variables-with-the-sensu-agent">Use environment variables with the Sensu agent</h3>
<p>Any environment variables you create in <code>/etc/default/sensu-agent</code> (Debian family) or <code>/etc/sysconfig/sensu-agent</code> (RHEL family) will be available to check and hook commands executed by the Sensu agent.
This includes your checks and plugins.</p>
<p>For example, if you create a custom environment variable <code>TEST_VARIABLE</code> in your sensu-agent file, it will be available to use in your check and hook configurations as <code>$TEST_VARIABLE</code>.</p>
<p>The following check example demonstrates how to use a <code>TEST_GITHUB_TOKEN</code> environment variable (set to the token value in the sensu-agent file) in the check command to run a script that pings the GitHub API:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="yml">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yml" data-lang="yml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">CheckConfig</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">api_version</span><span class="p">:</span><span class="w"> </span><span class="l">core/v2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ping-github-api</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l">ping-github-api.sh $TEST_GITHUB_TOKEN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">handlers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">slack</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">publish</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">subscriptions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">system</span></span></span></code></pre></div>
</div>



<div class="language" data-lang="json">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;CheckConfig&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;api_version&#34;</span><span class="p">:</span> <span class="s2">&#34;core/v2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;metadata&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;ping-github-api&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;spec&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;command&#34;</span><span class="p">:</span> <span class="s2">&#34;ping-github-api.sh $TEST_GITHUB_TOKEN&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;handlers&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;slack&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;interval&#34;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;publish&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;subscriptions&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="s2">&#34;system&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>




  </div>
</div>

<h3 id="use-environment-variables-to-specify-an-http-proxy-for-agent-use">Use environment variables to specify an HTTP proxy for agent use</h3>
<p>If an HTTP proxy is required to access the internet in your compute environment, you may need to configure the Sensu agent to successfully download dynamic runtime assets or execute commands that depend on internet access.</p>
<p>For Sensu agents that require a proxy server, define <code>HTTP_PROXY</code> and <code>HTTPS_PROXY</code> environment variables in your sensu-agent file.</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">HTTP_PROXY</span><span class="o">=</span><span class="s2">&#34;http://YOUR_PROXY_SERVER:PORT&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="s2">&#34;http://YOUR_PROXY_SERVER:PORT&#34;</span></span></span></code></pre></div>
</div>


<p>You can use the same proxy server URL for <code>HTTP_PROXY</code> and <code>HTTPS_PROXY</code>.
The proxy server URL you specify for <code>HTTPS_PROXY</code> does not need to use <code>https://</code>.</p>
<p>After you add the <code>HTTP_PROXY</code> and <code>HTTPS_PROXY</code> environment variables and restart sensu-agent, they will be available to check and hook commands executed by the Sensu agent.
You can then use <code>HTTP_PROXY</code> and <code>HTTPS_PROXY</code> to add dynamic runtime assets, run checks, and complete other tasks that typically require an internet connection for your unconnected entities.</p>

<div class="notices note" ><p><strong>NOTE</strong>: If you define the <code>HTTP_PROXY</code> and <code>HTTPS_PROXY</code> environment variables, the agent WebSocket connection will also use the proxy URL you specify.</p>
</div>

<h2 id="create-configuration-overrides">Create configuration overrides</h2>
<p>Sensu has default settings and limits for certain configuration attributes, like the default log level.
Depending on your environment and preferences, you may want to create overrides for these Sensu-specific defaults and limits.</p>
<p>You can create configuration overrides in several ways:</p>
<ul>
<li>Command line configuration flag arguments for <code>sensu-agent start</code>.</li>
<li>Environment variables in <code>/etc/default/sensu-agent</code> (Debian family) or <code>/etc/sysconfig/sensu-agent</code> (RHEL family).</li>
<li>Configuration settings in the agent.yml config file.</li>
</ul>

<div class="notices note" ><p><strong>NOTE</strong>: We do not recommend editing the systemd unit file to create overrides.
Future package upgrades can overwrite changes in the systemd unit file.</p>
</div>

<p>Sensu applies the following precedence to override settings:</p>
<ol>
<li>Arguments passed to the Sensu agent via command line configuration flags.</li>
<li>Environment variables in <code>/etc/default/sensu-agent</code> (Debian family) or <code>/etc/sysconfig/sensu-agent</code> (RHEL family).</li>
<li>Configuration in the agent.yml config file.</li>
</ol>
<p>For example, if you create overrides using all three methods, the command line configuration flag values will take precedence over the values you specify in <code>/etc/default/sensu-agent</code> or <code>/etc/sysconfig/sensu-agent</code> or the agent.yml config file.</p>
<h3 id="example-override-log-level">Example override: Log level</h3>
<p>The default <a href="#log-level">log level</a> for the Sensu agent is <code>warn</code>.</p>
<p>To override the default and automatically apply a different log level for the agent, add the <code>--log-level</code> command line configuration flag when you start the Sensu agent.
For example, to specify <code>debug</code> as the log level:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --log-level debug</span></span></code></pre></div>
</div>


<p>To configure an environment variable for the desired agent log level:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Debian family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;SENSU_LOG_LEVEL=debug&#39;</span> <span class="p">|</span> sudo tee -a /etc/default/sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="RHEL family">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;SENSU_LOG_LEVEL=debug&#39;</span> <span class="p">|</span> sudo tee -a /etc/sysconfig/sensu-agent</span></span></code></pre></div>
</div>




  </div>
</div>

<p>To configure the desired log level in the config file, add this line to agent.yml:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">log-level: debug</span></span></code></pre></div>
</div>


<h2 id="service-management">Service management</h2>

<div class="notices note" ><p><strong>NOTE</strong>: Service management commands may require administrative privileges.</p>
</div>

<h3 id="start-the-service">Start the service</h3>
<p>Use the <code>sensu-agent</code> tool to start the agent and apply configuration flags.</p>
<div data-platform="Linux" class="platform">

<p><strong>Linux</strong></p>
<p>Start the agent with <a href="#command-line-flags">configuration flags</a>:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --subscriptions disk-checks --log-level debug</span></span></code></pre></div>
</div>


<p>View available configuration flags and defaults:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --help</span></span></code></pre></div>
</div>


<p>Start the agent using a service manager:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl start sensu-agent</span></span></code></pre></div>
</div>


<p>If you do not provide any configuration flags, the agent loads configuration from the location specified by the <code>config-file</code> attribute (default is <code>/etc/sensu/agent.yml</code>).</p>
</div>

<div data-platform="Windows" class="platform">

<p><strong>Windows</strong></p>
<p>Run the following command as the admin user to install and start the agent:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent service install</span></span></code></pre></div>
</div>


<p>By default, the agent loads configuration from <code>%ALLUSERSPROFILE%\sensu\config\agent.yml</code> (for example, <code>C:\ProgramData\sensu\config\agent.yml</code>) and stores service logs to <code>%ALLUSERSPROFILE%\sensu\log\sensu-agent.log</code> (for example, <code>C:\ProgramData\sensu\log\sensu-agent.log</code>).</p>
<p>Configure the configuration file and log file locations using the <code>config-file</code> and <code>log-file</code> flags:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent service install --config-file <span class="s1">&#39;C:\\ProgramData\\sensu\\config\\agent.yml&#39;</span> --log-file <span class="s1">&#39;C:\\ProgramData\\sensu\\log\\sensu-agent.log&#39;</span></span></span></code></pre></div>
</div>


</div>

<h3 id="stop-the-service">Stop the service</h3>
<p>Stop the agent service using a service manager:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Linux">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl stop sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="Windows">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sc.exe stop SensuAgent</span></span></code></pre></div>
</div>




  </div>
</div>

<h3 id="restart-the-service">Restart the service</h3>
<p>You must restart the agent to implement any configuration updates.</p>
<div data-platform="Linux" class="platform">

<p><strong>Linux</strong></p>
<p>Restart the agent with a service manager:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl restart sensu-agent</span></span></code></pre></div>
</div>


</div>

<div data-platform="Windows" class="platform">

<p><strong>Windows</strong></p>
<p>Restart the agent with a service manager:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sc.exe start SensuAgent</span></span></code></pre></div>
</div>


<p>As of Sensu Go 6.8.2, the Sensu Agent service on Windows platforms will automatically restart after failures.
You&rsquo;ll still need to use a service manager restart Windows agents to implement configuration updates.</p>
</div>

<h3 id="enable-on-boot">Enable on boot</h3>
<p>Enable the agent to start on system boot:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Linux">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl <span class="nb">enable</span> sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="Windows">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">The service is configured to start automatically on boot by default.</span></span></code></pre></div>
</div>




  </div>
</div>


<div class="notices note" ><p><strong>NOTE</strong>: On older distributions of Linux, use <code>sudo chkconfig sensu-agent on</code> to enable the agent.</p>
</div>

<h3 id="disable-on-boot">Disable on boot</h3>
<p>Disable the agent from starting on system boot:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Linux">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl disable sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="Windows">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">The service is configured to start automatically on boot by default.</span></span></code></pre></div>
</div>




  </div>
</div>


<div class="notices note" ><p><strong>NOTE</strong>: On older distributions of Linux, use <code>sudo chkconfig sensu-agent off</code> to disable the agent.</p>
</div>

<h3 id="get-service-status">Get service status</h3>
<p>View the status of the agent service using a service manager:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Linux">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl status sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="Windows">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sc.exe query SensuAgent</span></span></code></pre></div>
</div>




  </div>
</div>

<h3 id="get-service-version">Get service version</h3>
<p>Get the version of the current <code>sensu-agent</code> tool:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent version</span></span></code></pre></div>
</div>


<p>Get the version of the running <code>sensu-agent</code> service:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">curl http://127.0.0.1:3031/version</span></span></code></pre></div>
</div>


<h3 id="uninstall-the-service">Uninstall the service</h3>
<p>Uninstall the sensu-agent service:</p>
<div class="language-toggle">
  <div class="tabs"></div>
  <div class="languages">
    

<div class="language" data-lang="Linux">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo systemctl stop sensu-agent</span></span></code></pre></div>
</div>



<div class="language" data-lang="Windows">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent service uninstall</span></span></code></pre></div>
</div>




  </div>
</div>

<h3 id="get-help">Get help</h3>
<p>The <code>sensu-agent</code> tool provides general and command-specific help flags.</p>
<p>View sensu-agent commands:</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent help</span></span></code></pre></div>
</div>


<p>List options for a specific command (in this case, <code>sensu-agent start</code>):</p>
<div class="language" data-lang="shell">
  <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sensu-agent start --help</span></span></code></pre></div>
</div>




      <script async type="text/javascript" src="/js/clip.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
      
      




    </div>
  </article>

  <section id="sidebar">
    <aside id="contribute">
  <div id="page-rating">
    <h4>Is this page helpful?</h4>
    <fieldset class="rating">
      <input type="radio" id="heart5" name="rating" value="5">
      <label for="heart5" title="Excellent"></label>
      <input type="radio" id="heart4" name="rating" value="4">
      <label for="heart4" title="Good"></label>
      <input type="radio" id="heart3" name="rating" value="3">
      <label for="heart3" title="OK"></label>
      <input type="radio" id="heart2" name="rating" value="2">
      <label for="heart2" title="Poor"></label>
      <input type="radio" id="heart1" name="rating" value="1">
      <label for="heart1" title="Unusable"></label>
    </fieldset>
  </div>

  <div>
    <h4>Contribute:</h4>
    <ul>
      <li>
        <a href="https://github.com/sensu/sensu-docs/edit/main/content/sensu-go/6.8/observability-pipeline/observe-schedule/agent.md" target="_blank">
          <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
          Edit this page
        </a>
      </li>
      <li>
        <a href="https://github.com/sensu/sensu-docs/issues/new/choose" target="_blank">
          <i class="fa fa-bug" aria-hidden="true"></i>
          Report a docs issue
        </a>
      </li>
      <li>
        <a href="https://github.com/sensu/sensu-docs/blob/main/CONTRIBUTING.md" target="_blank">
          <i class="fa fa-info-circle" aria-hidden="true"></i>
          Read the contributing guide
        </a>
      </li>
    </ul>
  </div>
</aside>

    <aside id="toc">
  
    <div>
      <h4>On this page:</h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#agent-authentication">Agent authentication</a></li>
    <li><a href="#communication-between-the-agent-and-backend">Communication between the agent and backend</a></li>
    <li><a href="#connection-failure">Connection failure</a></li>
    <li><a href="#synchronize-time-between-agents-and-the-backend">Synchronize time between agents and the backend</a></li>
    <li><a href="#agent-connection-to-a-cluster">Agent connection to a cluster</a></li>
    <li><a href="#keepalive-monitoring">Keepalive monitoring</a></li>
    <li><a href="#create-observability-events-using-service-checks">Create observability events using service checks</a></li>
    <li><a href="#create-observability-events-using-the-agent-api">Create observability events using the agent API</a></li>
    <li><a href="#create-observability-events-using-the-statsd-listener">Create observability events using the StatsD listener</a></li>
    <li><a href="#create-observability-events-using-the-agent-tcp-and-udp-sockets">Create observability events using the agent TCP and UDP sockets</a></li>
    <li><a href="#registration-endpoint-management-and-service-discovery">Registration, endpoint management, and service discovery</a></li>
    <li><a href="#agent-configuration-options">Agent configuration options</a></li>
    <li><a href="#agent-configuration-methods">Agent configuration methods</a></li>
    <li><a href="#create-configuration-overrides">Create configuration overrides</a></li>
    <li><a href="#service-management">Service management</a></li>
  </ul>
</nav>
    </div>
  
</aside>

  </section>
</main>

<section id="footer">
  <div class="footer--content">

    <div class="footer--content--center">

      <div class="register">
        <img alt="Sensu Go Lizy mascot image" title="Register your Sensu installation" src="/images/lizy-logo-a.png">
        <h3>Register your Sensu installation &mdash; Get rewards!</h3>
        <p>Take 2 minutes to <a href="https://sensu.io/register"><b><u>register your installation</u></b></a> and let Sensu help you along your journey.<br>
        We'll send you a free reward when you add your first 10 checks and connect at least 10 agents!</p>
      </div>
    </div>

    <div class="footer--content--left">
      <h3>About Sensu</h3>
      <p>The Sensu monitoring event pipeline empowers businesses to automate their monitoring workflows and gain deep visibility into their multi-cloud infrastructure, from Kubernetes to bare metal. Companies like Sony, Box.com, and Activision rely on Sensu to help deliver value faster, at scale.</p>

      <div class="footer--navigation">
        <div>
          <h3>Navigation</h3>
          <ul>
            <li><a href="https://sensu.io/products">Products</a></li>
            <li>
              <ul>
                <li><a href="https://sensu.io/products/core">Sensu Core</a></li>
                <li><a href="https://sensu.io/products/enterprise">Sensu Enterprise</a></li>
              </ul>
            </li>
            <li><a href="https://sensu.io/solutions">Solutions</a></li>
            <li>
              <ul>
                <li><a href="https://sensu.io/solutions/container-monitoring">For Containers</a></li>
                <li><a href="https://sensu.io/solutions/cloud-monitoring">For Cloud</a></li>
                <li><a href="https://sensu.io/solutions/nagios-alternative">For Nagios</a></li>
              </ul>
            </li>
            <li><a href="https://sensu.io/pricing">Pricing</a></li>
          </ul>
        </div>
        <div>
          <h3>Resources</h3>
          <ul>
            <li><a href="https://sensu.io/community">Community</a></li>
            <li><a href="https://docs.sensu.io">Documentation</a></li>
            <li><a href="https://sensu.io/products/downloads">Downloads</a></li>
            <li><a href="https://account.sensu.io/">Support</a></li>
          </ul>
        </div>
        <div>
          <h3>Community</h3>
          <ul>
            <li><a href="https://sensu.io/about">About</a></li>
            <li><a href="https://blog.sensu.io/" target="_blank">Blog</a></li>
            <li><a href="https://sensu.io/customers">Customers</a></li>
            <li><a href="https://sensu.io/contact">Contact</a></li>
            <li><a href="https://sensu.io/sales">Sales</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer--content--right">
      <h3>Get In Touch</h3>
      <p>Our team is here to help. Use our <a href="https://sensu.io/contact"><b><u>contact form</b></u></a> or reach out on GitHub, Slack, or Twitter.</p>
      <ul class="inline">
        <li><a href="https://github.com/sensu" target="_blank"><svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-920.000000, -4175.000000)">
              <g transform="translate(0.000000, 4008.000000)" fill="#2C3458">
                  <path d="M944,179.302423 C944,184.73279 940.5625,189.346199 935.796875,190.980114 C935.1875,191.092246 934.984375,190.707795 934.984375,190.387419 L934.984375,187.007457 C934.984375,185.854105 934.609375,185.117241 934.171875,184.73279 C936.84375,184.428433 939.65625,183.387212 939.65625,178.661672 C939.65625,177.316095 939.1875,176.210799 938.421875,175.361803 C938.546875,175.041428 938.953125,173.791963 938.296875,172.093972 C937.296875,171.773597 935,173.359456 935,173.359456 C934.046875,173.087137 933.015625,172.942968 932,172.942968 C930.984375,172.942968 929.953125,173.087137 929,173.359456 C929,173.359456 926.703125,171.773597 925.6875,172.093972 C925.046875,173.791963 925.453125,175.041428 925.578125,175.361803 C924.8125,176.210799 924.34375,177.316095 924.34375,178.661672 C924.34375,183.371194 927.140625,184.428433 929.8125,184.73279 C929.46875,185.053166 929.15625,185.581785 929.046875,186.382724 C928.359375,186.7031 926.609375,187.247739 925.5625,185.357522 C924.90625,184.188151 923.71875,184.092039 923.71875,184.092039 C922.546875,184.07602 923.640625,184.844921 923.640625,184.844921 C924.421875,185.213353 924.96875,186.639025 924.96875,186.639025 C925.671875,188.833598 929.015625,188.096734 929.015625,188.096734 C929.015625,189.121936 929.03125,190.099081 929.03125,190.387419 C929.03125,190.707795 928.8125,191.092246 928.203125,190.980114 C923.4375,189.346199 920,184.73279 920,179.302423 C920,172.51046 925.375,167 932,167 C938.625,167 944,172.51046 944,179.302423 Z"></path>
              </g>
          </g>
      </svg>
      </svg></a></li>
        <li><a href="https://slack.sensu.io/" target="_blank"><svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-970.000000, -4174.000000)">
              <g transform="translate(0.000000, 4008.000000)" fill="#2C3458">
                  <path d="M983.558646,174.858722 C981.981445,175.389656 980.426,175.913367 978.850551,176.443791 C979.381566,178.019593 979.905426,179.574164 980.436149,181.149018 C982.013351,180.618084 983.568868,180.094373 985.144317,179.56395 C984.613229,177.988147 984.089442,176.433576 983.558646,174.858722 M987.341608,173.597015 C987.875471,175.177268 988.398382,176.725054 988.927352,178.290642 C989.756037,178.018937 990.556758,177.747669 991.363173,177.494204 C992.397094,177.169165 993.417872,177.616194 993.827396,178.558626 C994.288246,179.619546 993.796293,180.824125 992.708489,181.235696 C991.977422,181.512289 991.230584,181.747514 990.490901,182.001563 C990.405258,182.031112 990.320418,182.063069 990.205863,182.104583 C990.270843,182.306246 990.332611,182.502072 990.396862,182.697023 C990.599104,183.310913 990.820184,183.919332 991.000743,184.53957 C991.250662,185.398097 990.877426,186.300984 990.115766,186.758301 C989.350602,187.21766 988.359685,187.148348 987.740107,186.522857 C987.48201,186.262315 987.291814,185.904516 987.158276,185.557297 C986.881926,184.838635 986.664132,184.097501 986.41465,183.342724 C984.842632,183.872564 983.293175,184.39467 981.715316,184.926334 C981.780881,185.135657 981.839875,185.33214 981.903906,185.526945 C982.108631,186.149518 982.328324,186.767567 982.518155,187.394517 C982.876862,188.579689 982.220339,189.689565 981.01893,189.955652 C980.084524,190.162568 979.102077,189.628716 978.759651,188.702773 C978.491625,187.977983 978.253679,187.242175 978.0023,186.511256 C977.970101,186.417502 977.937538,186.32382 977.894972,186.200955 C977.176317,186.441068 976.471168,186.676877 975.765801,186.912175 C975.373216,187.043066 974.980924,187.128722 974.558915,187.042774 C973.695331,186.866793 973.028587,186.13799 972.956744,185.262317 C972.879935,184.327035 973.388828,183.514036 974.25964,183.211249 C974.963547,182.966612 975.674171,182.741237 976.381583,182.506669 C976.466496,182.478579 976.55024,182.446841 976.652603,182.410361 C976.123997,180.844627 975.601086,179.295966 975.0681,177.717318 C974.51102,177.900157 973.970732,178.081902 973.427451,178.254162 C973.037422,178.37783 972.650459,178.539437 972.249697,178.595763 C971.209351,178.742049 970.294513,178.107584 970.060948,177.128745 C969.815775,176.101533 970.325324,175.12138 971.318796,174.755556 C972.03548,174.491658 972.763335,174.258184 973.486153,174.010993 C973.579827,173.978964 973.673355,173.946496 973.79397,173.904836 C973.550914,173.175814 973.313845,172.461675 973.074512,171.74834 C972.9455,171.363911 972.86818,170.9797 972.952144,170.56864 C973.131023,169.693697 973.864792,169.035155 974.761961,168.966718 C975.677968,168.896895 976.483872,169.408859 976.785849,170.272931 C977.019633,170.941761 977.231952,171.618032 977.454565,172.290583 C977.494064,172.4098 977.537798,172.527559 977.585329,172.662317 C979.165889,172.133353 980.72586,171.61132 982.311677,171.080605 C982.104542,170.467809 981.897408,169.876609 981.705971,169.280375 C981.586962,168.909882 981.437652,168.53771 981.396401,168.156053 C981.286591,167.140296 981.9326,166.296142 982.949216,166.053402 C983.895304,165.827516 984.871253,166.334373 985.22244,167.268633 C985.503974,168.017355 985.744548,168.781398 986.00447,169.538291 C986.033236,169.622196 986.069012,169.703693 986.108439,169.804013 C986.874479,169.548505 987.622777,169.293362 988.374726,169.049601 C989.361919,168.729596 990.330567,169.104759 990.808575,169.982548 C991.399095,171.06718 990.889838,172.393822 989.71829,172.800431 C989.014237,173.044776 988.304123,173.27183 987.596931,173.507055 C987.520195,173.532518 987.444409,173.560608 987.341608,173.597015"></path>
              </g>
          </g>
      </svg></a></li>
        <li><a href="https://twitter.com/sensu" target="_blank"><svg width="24px" height="20px" viewBox="0 0 24 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-1017.000000, -4176.000000)">
                <g transform="translate(0.000000, 4008.000000)" fill="#2C3458">
                    <path d="M1038.54405,172.982073 C1038.55358,173.198827 1038.55676,173.41558 1038.55676,173.633963 C1038.55676,180.306063 1033.60511,188 1024.54749,188 C1021.76566,188 1019.17936,187.16558 1017,185.729791 C1017.38469,185.778683 1017.77732,185.79987 1018.17473,185.79987 C1020.48126,185.79987 1022.60498,184.994785 1024.28997,183.638853 C1022.13604,183.601369 1020.31594,182.139505 1019.68963,180.134941 C1019.99006,180.195241 1020.30004,180.226206 1020.61796,180.226206 C1021.06464,180.226206 1021.49861,180.162647 1021.91509,180.048566 C1019.66101,179.584094 1017.96331,177.543677 1017.96331,175.099087 L1017.96331,175.035528 C1018.62777,175.410365 1019.3876,175.640156 1020.19513,175.664602 C1018.87257,174.758475 1018.00305,173.215124 1018.00305,171.463168 C1018.00305,170.537484 1018.24467,169.672099 1018.67068,168.924055 C1021.09803,171.979791 1024.72871,173.987614 1028.82037,174.201108 C1028.73612,173.83116 1028.6932,173.443286 1028.6932,173.048892 C1028.6932,170.26043 1030.89641,168 1033.61624,168 C1035.03259,168 1036.31223,168.614407 1037.20877,169.595502 C1038.33263,169.36897 1039.38495,168.948501 1040.33872,168.369948 C1039.96834,169.54824 1039.18943,170.537484 1038.17208,171.161669 C1039.16876,171.044329 1040.11776,170.770535 1041,170.367992 C1040.33872,171.381682 1039.50576,172.269883 1038.54405,172.982073"></path>
                </g>
            </g>
        </svg>
      </a></li>
      </ul>

      <h3>Join Our Community</h3>
      <p>Become a member of the Sensu community and get access to the community Slack channel and our weekly newsletter containing updates about Sensu.</p>
      <form action="https://share.hsforms.com/10Dzh-ahWTaulALvp3xFfmQ2mwx3" target="_blank">
        <input type="email" id="EMAIL" name="email" placeholder="Your Email">
        <button type="submit">Sign Up!</button>
      </form>
    </div>
  </div>
  <footer>
    Made with <a href="https://twitter.com/hashtag/monitoringlove" target="_blank">#monitoringlove</a> by Sensu, Inc. &copy; 2013-2023 &mdash; <a href="https://sensu.io/privacy-policy" target="_blank" rel="noopener noreferrer">Privacy Policy</a>
  </footer>
</section>


<script>
$( document ).ready(function() {
  applyTipBoxes();
});

function boldFirstWord(element) {
  newElement = element.html().replace(/(^\w+)/, '<strong>$1</strong>');
  element.html(newElement);
}

function boldFirstTwoWords(element) {
  newElement = element.html().replace(/(^\w+ \w+)/, '<strong>$1</strong>');
  element.html(newElement);
}

function applyTipBoxes() {
  $('em').wrap(function() {
    if ($(this).text().includes('NOTE:')) {
      boldFirstWord($(this));
      return '<div class="alert-note"></div>';
    } else if ($(this).text().includes('WARNING:')) {
      boldFirstWord($(this));
      return '<div class="alert-warning"></div>';
    } else if ($(this).text().includes('PRO TIP:')) {
      boldFirstTwoWords($(this));
      return '<div class="alert-tip"></div>';
    } else if ($(this).text().includes('IMPORTANT:')) {
      boldFirstWord($(this));
      return '<div class="alert-important"></div>';
    }
  });
}
</script>

<script>
  
    var base_url = '';
    var repo_id  = 'sensu\/sensu-docs';
  
</script>

<script src="/javascripts/application.js"></script>
<script src="/js/toc.js"></script>


<script>
  /* Add headers to scrollspy */
  var headers   = document.getElementsByTagName("h2");
  var scrollspy = document.getElementById('scrollspy');

  if(scrollspy) {
    if(headers.length > 0) {
      for(var i = 0; i < headers.length; i++) {
        var li = document.createElement("li");
        li.setAttribute("class", "anchor");

        var a  = document.createElement("a");
        a.setAttribute("href", "#" + headers[i].id);
        a.setAttribute("title", headers[i].innerHTML);
        a.innerHTML = headers[i].innerHTML;

        li.appendChild(a)
        scrollspy.appendChild(li);
      }
    } else {
      scrollspy.parentElement.removeChild(scrollspy)
    }
  }

  /* Add permanent link next to the headers */
  var headers = document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]");

  for(var i = 0; i < headers.length; i++) {
    var a = document.createElement("a");
    a.setAttribute("href", "#" + headers[i].id);
    a.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.3 9.2" width="18.3px"><path d="M-1.8-6.4h22v22h-22v-22z" fill="none"/><path d="M1.7 4.6C1.7 3 3 1.7 4.6 1.7h3.7V0H4.6C2.1 0 0 2.1 0 4.6s2.1 4.6 4.6 4.6h3.7V7.4H4.6C3 7.4 1.7 6.2 1.7 4.6zm3.8.9h7.3V3.7H5.5v1.8zM13.8 0h-3.7v1.7h3.7c1.6 0 2.8 1.3 2.8 2.8s-1.3 2.8-2.8 2.8h-3.7V9h3.7c2.5 0 4.6-2.1 4.6-4.6S16.3 0 13.8 0z"/></svg>';
    headers[i].appendChild(a);
  }
</script>

<script type="text/javascript" src="//script.crazyegg.com/pages/scripts/0087/0389.js" async="async"></script>

  <script>
    (function(i,s,o,g,r,a,m){
      i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
      []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
      m.parentNode.insertBefore(a,m)
    })(window, document,
      'script', '//www.google-analytics.com/analytics.js', 'ga');
     
    ga('create', 'UA-39138312-17', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
     
    var buttons = document.querySelectorAll('a');
    Array.prototype.map.call(buttons, function(item) {
      if (item.host != document.location.host) {
        item.addEventListener('click', function() {
          var action = item.getAttribute('data-action') || 'follow';
          ga('send', 'event', 'outbound', action, item.href);
        });
      }
    });
     
    var searchInputs = document.getElementsByClassName('search');
    for (var i=0; i < searchInputs.length; i++) {
      searchInputs[i].addEventListener('blur', function() {
        if (this.value) {
          var path = document.location.pathname;
          ga('send', 'pageview', path + '?q=' + this.value);
        }
      });
    }

    var dropdowns = document.getElementsByClassName('dropdown');
    for (var i=0; i < dropdowns.length; i++) {
      dropdowns[i].addEventListener('click', function(e) {
        e.stopPropagation();
        e.currentTarget.classList.toggle('open');
      });
    }
    document.addEventListener('click', function(e) {
      for (var i=0; i < dropdowns.length; i++) {
        dropdowns[i].classList.remove('open');
      };
    });

    
    var languages = {
      javascript: "JavaScript",
      json: "JSON",
      yml: "YML",
    };
    var toggles = document.getElementsByClassName('language-toggle');
    for (var i=0; i < toggles.length; i++) {
      var children = Array.prototype.slice.call(toggles[i].querySelectorAll('.language'));
      var langs = children.map(function(c) { return c.dataset.lang; });

      
      langs.forEach(function(lang) {
        var el = document.createElement('span');
        el.setAttribute('role', 'tab');
        el.setAttribute('tabindex', '0');
        el.setAttribute('data-lang', lang);
        el.innerText = languages[lang] || lang;
        el.addEventListener('click', function(e) {
          var elOffset = e.currentTarget.getBoundingClientRect().top;
          setLanguage(e.currentTarget.dataset.lang);
          e.currentTarget.scrollIntoView();
          window.scrollBy(0, -elOffset);
        });
        toggles[i].querySelector('.tabs').appendChild(el);
      });

      
      toggles[i].querySelector('.languages').children[0].classList.add('active');
    }

    
    function setLanguage(lang) {
      
      localStorage.setItem('lang', lang);

      
      var tabLists = Array.prototype.slice.call(document.querySelectorAll('.language-toggle .tabs'));
      
      tabLists.forEach(function(tabList) {
        var activeTab = tabList.querySelector('.active');
        var selectedTab = tabList.querySelector('[data-lang="' + lang + '"]');
        var allTabs = Array.prototype.slice.call(tabList.children);
        allTabs.forEach(function(t) { return t.classList.remove('active'); });
        if (selectedTab) {
          selectedTab.classList.add('active');
        } else if (activeTab) {
          activeTab.classList.add('active');
        } else {
          allTabs[0].classList.add('active');
        }
      });

      
      var selector = '.language-toggle .language[data-lang="' + lang + '"]';
      var langBlockChildren = document.querySelectorAll(selector);
      var langBlocks = Array.prototype.slice.call(langBlockChildren).map(function(el) { return el.closest('.languages'); });
      
      langBlocks.forEach(function(el) {
        Array.prototype.slice.call(el.children).forEach(function(c) {
          return c.classList.remove('active');
        })
      });
      
      langBlockChildren.forEach(function(el) { return el.classList.add('active'); });
    }
    
    setLanguage(localStorage.getItem('lang'));
  </script>



<script>
  !function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
  },s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
  a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
  twq('init','o1043');
  twq('track','PageView');
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
  var docsearchOptions = {
    appId: 'S633WESKWC',
    apiKey: '2aaea336f8b58143b17119944385071f',
    indexName: 'sensu',
    inputSelector: '#desktop-search',
    algoliaOptions: {
      facetFilters: [
        [
          
            'tags:sensu-go'
          
        ],
        [
          
            'version:6.8'
          
        ]
      ]
    },
    debug: false
  };

  if (document.querySelector(docsearchOptions.inputSelector)) {
    docsearch(docsearchOptions);
  }

  docsearchOptions.inputSelector = '#mobile-search';
  if (document.querySelector(docsearchOptions.inputSelector)) {
    docsearch(docsearchOptions);
  }
</script>

</body>
</html>
